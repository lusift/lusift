{"version":3,"file":"index.js","sources":["../../../node_modules/global/window.js","../../../src/common/logger.ts","../../../src/common/store/localStorage.ts","../../../src/common/utils/isOfType/index.ts","../../../src/common/utils/mergeObjects.ts","../../../src/common/utils/styleObjectToString.ts","../../../src/common/utils/getStepUID.ts","../../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../../src/common/utils/onElementResize.ts","../../../src/common/utils/getElementPosition.ts","../../../src/common/utils/changeAsyncStepStatus.ts","../../../src/common/utils/roundNum.ts","../../../src/common/utils/doesStepMatchDisplayCriteria.ts","../../../src/common/utils/doesStringMatchRegex.ts","../../../src/common/constants/index.ts","../../../src/common/progressBar/renderProgressBar.ts","../../../src/common/closeXButton/renderCloseXButton.ts","../../../../floating-ui-tooltip/dist/index.js","../../../src/common/createTooltip.ts","../../../src/tooltip/createTooltip.ts","../../../src/tooltip/defaultTooltipActions.ts","../../../src/backdrop/Backdrop.ts","../../../src/tooltip/Tooltip.ts","../../../src/modal/Modal.ts","../../../src/modal/createModal.ts","../../../src/hotspot/createHotspotTooltip.ts","../../../src/hotspot/Hotspot.ts","../../../src/hotspot/createBeacon.ts","../../../src/common/utils/startStepInstance.ts","../../../node_modules/tabbable/dist/index.esm.js","../../../node_modules/focus-trap/dist/focus-trap.esm.js","../../../src/common/utils/addFocusTrap.ts","../../../src/lusift/Guide.ts","../../../node_modules/lodash.isequal/index.js","../../../src/lusift/Lusift.ts","../../../src/lusift/addDefaultCSS.ts","../../../src/react/src/index.tsx","../../../src/common/utils/vanillaRender.ts"],"sourcesContent":["var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","const messagePrefix = \"Lusift:\";\n\n/* export function log(message: string, ...args: any[]) {\n    console.log(`${messagePrefix} ${message}`, ...args);\n} */\nexport const log = console.log;\n\nexport function warn(message: string, ...args: any[]) {\n    console.warn(`${messagePrefix} ${message}`, ...args);\n}\n\nexport function error(message: string, ...args: any[]) {\n    console.error(`${messagePrefix} ${message}`, ...args);\n}\n","import { window, document } from \"global\";\nimport { error } from \"../logger\";\n\nif (!window) {\n    error(\"window is undefined\");\n}\n\n/**\n * This function checks if the lusift_state is saved in localStorage\n */\nexport const loadState = () => {\n    try {\n        // Load the data saved in localStorage, against the key 'lusift_state'\n        const serialisedState = window.localStorage.getItem(\"lusift_state\");\n\n        // Passing undefined to createStore will result in our app getting the default state\n        // If no data is saved, return undefined\n        if (!serialisedState) return undefined;\n\n        // De-serialise the saved state, and return it.\n        return JSON.parse(serialisedState);\n    } catch (err) {\n        // Return undefined if localStorage is not available,\n        // or data could not be de-serialised,\n        // or there was some other error\n        return undefined;\n    }\n};\n\n/**\n * This function accepts the app state, and saves it to localStorage\n * @param state\n */\n\nexport const saveState = state => {\n    try {\n        // Convert the state to a JSON string\n        const serialisedState = JSON.stringify(state);\n\n        // Save the serialised state to localStorage against the key 'lusift_state'\n        window.localStorage.setItem(\"lusift_state\", serialisedState);\n    } catch (err) {\n        // Log errors here, or ignore\n    }\n};\n","import { GuideType, Content } from \"../../types\";\nimport { log } from \"../../logger\";\n\nexport function isObject(item: any): boolean {\n    return item instanceof Object && item.constructor === Object;\n}\n\nexport function isObjectOrUndefined(object: any): boolean {\n    return isObject(object) || typeof object === \"undefined\";\n}\n\nexport function isOfTypeTooltipData(object: any): boolean {\n    const placements = [\"bottom\", \"top\", \"right\", \"left\", \"auto\"];\n    placements.forEach(p => {\n        placements.push(`${p}-start`);\n        placements.push(`${p}-end`);\n    });\n\n    return (\n        isObject(object) &&\n        typeof object.arrow === \"boolean\" &&\n        (!object.offset || (object.offset instanceof Object && object.offset.length === 2)) &&\n        (!object.actions || isObject(object.actions)) &&\n        placements.includes(object.placement) &&\n        (typeof object.contentBody === \"string\" ||\n            (!object.contentBody && typeof object.contentBody !== \"boolean\")) &&\n        // (typeof object.contentBody === 'string' && !!object.contentBody) &&\n        isObjectOrUndefined(object.progressOn) &&\n        isObjectOrUndefined(object.backdrop)\n    );\n}\n\nexport function isOfTypeTarget(object: any, type: string): boolean {\n    const comparators = [\"is\", \"contains\", \"endsWith\", \"startsWith\"];\n    const elementSelectorExists =\n        typeof object.elementSelector === \"string\" && !!object.elementSelector;\n\n    return (\n        isObject(object) &&\n        (elementSelectorExists || type === \"modal\") && //validate element selector\n        isObject(object.path) &&\n        typeof object.path.comparator === \"string\" &&\n        comparators.includes(object.path.comparator) &&\n        typeof object.path.value === \"string\"\n    ); //validate path\n}\n\nexport function isOfTypeTooltipActions(object: any): boolean {\n    return (\n        isObject(object) &&\n        Object.entries(object).every(prop => isObject(prop)) &&\n        isObjectOrUndefined(object.closeButton.styleProps) &&\n        isObjectOrUndefined(object.navSection.styleProps) &&\n        isObjectOrUndefined(object.navSection.nextButton) &&\n        isObjectOrUndefined(object.navSection.nextButton.styleProps) &&\n        isObjectOrUndefined(object.navSection.prevButton) &&\n        isObjectOrUndefined(object.navSection.dissmissLink) &&\n        isObjectOrUndefined(object.navSection.dissmissLink.styleProps)\n    );\n}\n\nexport function isOfTypeTooltip(object: any): boolean {\n    return (\n        isOfTypeTooltipData(object.data) &&\n        isObjectOrUndefined(object.styleProps) &&\n        object.type === \"tooltip\" &&\n        isOfTypeTooltipData(object.data)\n    );\n}\n\nexport function isOfTypeModal(object: any): boolean {\n    return (\n        object.type === \"modal\" && isObject(object.data) && isObjectOrUndefined(object.closeButton)\n    );\n}\n\nexport function isOfTypeHotspot(object: any): boolean {\n    return object.type === \"hotspot\";\n}\n\nexport function isOfTypeStep(object: any): boolean {\n    const stepTypes = [\"tooltip\", \"hotspot\", \"modal\"];\n\n    return (\n        isObject(object) &&\n        typeof object.index === \"number\" &&\n        stepTypes.includes(object.type) &&\n        // target\n        isOfTypeTarget(object.target, object.type) &&\n        (isOfTypeTooltip(object) || isOfTypeHotspot(object) || isOfTypeModal(object))\n    );\n}\n\nexport function isOfTypeGuide(object: any): boolean {\n    return (\n        isObject(object) &&\n        typeof object.id === \"string\" &&\n        !!object.id &&\n        typeof object.name === \"string\" &&\n        typeof object.description === \"string\" &&\n        object.steps instanceof Object &&\n        object.steps.hasOwnProperty(\"length\") &&\n        object.steps.every(isOfTypeStep)\n    );\n}\n\nexport function isOfTypeContent(object: Content): boolean {\n    const itemTypes = [\"guide\"];\n    return (\n        isObject(object) &&\n        Object.values(object).every((item: any) => {\n            return typeof itemTypes.includes(item.type) && isOfTypeGuide(item.data);\n        })\n    );\n}\n\nexport function isOfTypeHtmlElement(element): boolean {\n    log(\"bodyContent\");\n    if (typeof element !== \"object\") return false;\n    return (\n        element.constructor.name.startsWith(\"HTML\") && element.constructor.name.endsWith(\"Element\")\n    );\n}\n\nexport const isReactComponent = (component: any): boolean => {\n    return typeof component === \"function\";\n};\n\nexport const isReactClassComponent = (component: any): boolean => {\n    // there's component.prototype.isReactComponent too\n    return isReactComponent(component) && typeof component.prototype.render === \"function\";\n};\n","import { isObject } from \"./isOfType\";\n/*\n * Deep merge properties of two objects\n * replace with lodash.merge if insufficient\n * or check this thread:\n * https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\n */\nfunction mergeObjects(obj1: Object, obj2: Object): any {\n    obj1 = Object.assign({}, obj1);\n    obj2 = Object.assign({}, obj2);\n\n    Object.keys(obj2).forEach(key => {\n        try {\n            // Property in destination object set; update its value.\n            if (isObject(obj2[key])) {\n                obj1[key] = mergeObjects(obj1[key], obj2[key]);\n            } else {\n                obj1[key] = obj2[key];\n            }\n        } catch (e) {\n            // Property in destination object not set; create it and set its value.\n            obj1[key] = obj2[key];\n        }\n    });\n    return obj1;\n}\n\nexport default mergeObjects;\n","const camelCaseToHyphenCase = (camelCaseString: string) => {\n    return camelCaseString.replace(/[A-Z]/g, m => \"-\" + m.toLowerCase());\n};\n\nconst styleObjectToString = (styleProps: Object) => {\n    // convert and layout styleProps into string literal\n    let stylesString = \"\";\n    Object.keys(styleProps).forEach(key => {\n        stylesString += `${camelCaseToHyphenCase(key)}: ${styleProps[key]} !important;\\n`;\n    });\n    return stylesString;\n};\n\nexport default styleObjectToString;\n","const getStepUID = ({ guideID, index, type }): string => {\n    return `lusift--g-${guideID}--${type}-${index}`;\n};\nexport default getStepUID;\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","import { window, document } from \"global\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nconst onElementResize = (element: HTMLElement, callback: Function) => {\n    const resizeObserver = new ResizeObserver(() => callback());\n    resizeObserver.observe(element);\n    return resizeObserver;\n};\n\nexport default onElementResize;\n","import { window, document } from \"global\";\nimport { ElementPosition } from \"../types\";\n\nconst getElementPosition = (element: HTMLElement): ElementPosition => {\n    const { documentElement, body } = document;\n\n    const scrollTop = window.pageYOffset || documentElement.scrollTop || body.scrollTop;\n    const scrollLeft = window.pageXOffset || documentElement.scrollLeft || body.scrollLeft;\n    const elementRect = element.getBoundingClientRect();\n\n    const position: ElementPosition = {\n        top: elementRect.top + scrollTop,\n        left: elementRect.left + scrollLeft,\n        right: elementRect.left + scrollLeft + elementRect.width,\n        bottom: elementRect.top + scrollTop + elementRect.height,\n        height: elementRect.height,\n        width: elementRect.width,\n    };\n    return position;\n};\n\nexport default getElementPosition;\n","import { window } from \"global\";\nimport { loadState, saveState } from \"../store\";\n\nconst changeAsyncStepStatus = (stepIndex: number, toOpen: boolean): void => {\n    const exisitingState = loadState();\n    const { id: activeGuideID } = window.Lusift.activeGuide;\n    saveState({\n        ...exisitingState,\n        [activeGuideID]: {\n            ...exisitingState[activeGuideID],\n            trackingState: {\n                ...exisitingState[activeGuideID].trackingState,\n                asyncSteps: {\n                    ...exisitingState[activeGuideID].trackingState.asyncSteps,\n                    [stepIndex]: {\n                        toOpen,\n                    },\n                },\n            },\n        },\n    });\n};\n\nexport default changeAsyncStepStatus;\n","const roundNum = (value: number, decimalPlaces: number = 2): number => {\n    return (\n        Math.round((value + Number.EPSILON) * Math.pow(10, decimalPlaces)) /\n        Math.pow(10, decimalPlaces)\n    );\n};\nexport default roundNum;\n","import { window, document } from \"global\";\nimport doesStringMatchRegex from \"./doesStringMatchRegex\";\n\nconst doesStepPathMatch = (targetPath): boolean => {\n    // is, endsWith, startsWith, contains, regex\n    const { value, comparator } = targetPath;\n    const { pathname, hash } = window.location;\n    const currentPath = pathname + hash;\n\n    switch (comparator) {\n        case \"is\":\n            return currentPath === value;\n        case \"contains\":\n            return currentPath.includes(value);\n        case \"endsWith\":\n            return currentPath.endsWith(value);\n        case \"startWith\":\n            return currentPath.startsWith(value);\n        case \"regex\":\n            return doesStringMatchRegex(currentPath, value);\n        default:\n            return false;\n    }\n};\n\nconst isStepElementFound = (elementSelector: string): boolean => {\n    /* log(this.guideData);\n     log('checking if element exists') */\n    return Boolean(document.querySelector(elementSelector));\n};\n\nconst doesStepMatchesDisplayCriteria = ({ target, type }): boolean => {\n    let criteriaMatch = doesStepPathMatch(target.path);\n    if (type !== \"modal\") {\n        criteriaMatch = criteriaMatch && isStepElementFound(target.elementSelector);\n    }\n    return criteriaMatch;\n};\n\nexport default doesStepMatchesDisplayCriteria;\n","const doesStringMatchRegex = (str: string, regex: string): boolean => {\n    // see if regex pattern matches url string (case insensitive)\n    // e.g. '/.+/dashboard' matches '/lusift/dashboard'\n    const regexPattern = new RegExp(regex, \"i\");\n    return regexPattern.test(str);\n};\nexport default doesStringMatchRegex;\n","export const MODAL_OVERLAY_CLASS = \"lusift-modal-overlay\";\nexport const BEACON_CONTAINER_CLASS = \"lusift-beacon-container\";\nexport const DEFAULT_TOOLTIP_BORDER_RADIUS = \"4px\";\nexport const DEFAULT_MODAL_BORDER_RADIUS = \"4px\";\nexport const PRIMARY_COLOR = \"#17a3a8\";\nexport const DEFAULT_PROGRESS_BAR_HEIGHT = \"3px\";\nexport const LUSIFT_CONTAINER_ID = \"lusift\";\nexport const LUSIFT_SHADOW_ROOT_ID = \"lusift-root\";\n","import { window } from \"global\";\nimport { loadState } from \"../store\";\nimport {\n    DEFAULT_TOOLTIP_BORDER_RADIUS,\n    DEFAULT_MODAL_BORDER_RADIUS,\n    PRIMARY_COLOR,\n    DEFAULT_PROGRESS_BAR_HEIGHT,\n} from \"../constants\";\n\nconst renderProgressBar = () => {\n    const currentGuide = loadState()[window.Lusift.activeGuide.id];\n\n    if (!currentGuide) return \"\";\n    if (!currentGuide) {\n        // Assuming that this is dev mode\n        let progress = \"66.66\";\n        let max = 100;\n        return `\n      <progress class=\"lusift-progress\" aria-label=\"progressbar\" max=\"${max}\" value=\"${progress}\">\n        ${progress}%\n      </progress>\n    `;\n    }\n\n    const currentStep = currentGuide.steps[currentGuide.trackingState.currentStepIndex];\n    const progressBarData = currentGuide.progressBar || {};\n\n    // find out borderRadius based on step type (their default border radii), or via styleProps\n    let {\n        height = DEFAULT_PROGRESS_BAR_HEIGHT,\n        color = PRIMARY_COLOR,\n        borderRadius,\n    } = progressBarData;\n\n    if (!borderRadius) {\n        if (currentStep.type === \"modal\") {\n            if (currentStep.styleProps) {\n                borderRadius = currentStep.styleProps.borderRadius || DEFAULT_MODAL_BORDER_RADIUS;\n            } else {\n                borderRadius = DEFAULT_MODAL_BORDER_RADIUS;\n            }\n        } else {\n            if (currentStep.styleProps) {\n                borderRadius = currentStep.styleProps.borderRadius || DEFAULT_TOOLTIP_BORDER_RADIUS;\n            } else {\n                borderRadius = DEFAULT_TOOLTIP_BORDER_RADIUS;\n            }\n        }\n    }\n    // filter out steps that are not of type hotspot with async property of true\n    const syncSteps = currentGuide.steps.filter(step => {\n        return !(step.type === \"hotspot\" && step.async);\n    });\n\n    const progress =\n        ((syncSteps.findIndex(step => {\n            return step.index === currentStep.index;\n        }) +\n            1) /\n            (syncSteps.length + 1)) *\n        100;\n\n    const max = 100;\n\n    // TODO: put this with right defaults in global default css file\n    return `\n    <style>\n      .lusift-progress {\n        height: ${height};\n      }\n      .lusift-progress::-webkit-progress-bar {\n        border-radius: ${borderRadius}; /*border-radius of tooltip*/\n      }\n      .lusift-progress::-webkit-progress-value {\n        background-color: ${color}; /*color of progress bar*/\n      }\n    </style>\n\n    <progress class=\"lusift-progress\" aria-label=\"progressbar\" max=\"${max}\" value=\"${progress}\">\n      ${progress}%\n    </progress>\n    `;\n};\n\nexport default renderProgressBar;\n","import { styleObjectToString } from \"../utils\";\n\nconst renderCloseXButton = (closeButton: any, stepType: string): string => {\n    if (closeButton.disabled) return `<div style=\"margin-top: 0.7rem\"></div>`;\n    return `\n    <style>\n      .lusift .${stepType.toLowerCase()} .closeX{\n        ${styleObjectToString(closeButton.styleProps)}\n      }\n    </style>\n\n    <section class=\"close-btn\">\n      <button onclick=\"Lusift.close()\" class=\"closeX close\">&times;</button>\n    </section>\n  `;\n};\n\nexport default renderCloseXButton;\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"tslib\")):\"function\"==typeof define&&define.amd?define([\"tslib\"],e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self)[\"floating-ui-tooltip\"]=e(t.tslib)}(this,(function(t){\"use strict\";function e(){return document.createElement(\"div\")}function n(t){return{box:t.querySelector(\".floating-ui-tooltip-box\"),content:t.querySelector(\".floating-ui-tooltip-content\"),arrow:t.querySelector(\".floating-ui-tooltip-arrow\")||void 0}}function o(t){return t.split(\"-\")[0]}function i(t){return t.split(\"-\")[1]}function r(t){return[\"top\",\"bottom\"].includes(o(t))?\"x\":\"y\"}function s(t){return\"y\"===t?\"height\":\"width\"}function a(t,e,n){let{reference:a,floating:l}=t;const c=a.x+a.width/2-l.width/2,f=a.y+a.height/2-l.height/2,u=r(e),d=s(u),p=a[d]/2-l[d]/2,h=\"x\"===u;let m;switch(o(e)){case\"top\":m={x:c,y:a.y-l.height};break;case\"bottom\":m={x:c,y:a.y+a.height};break;case\"right\":m={x:a.x+a.width,y:f};break;case\"left\":m={x:a.x-l.width,y:f};break;default:m={x:a.x,y:a.y}}switch(i(e)){case\"start\":m[u]-=p*(n&&h?-1:1);break;case\"end\":m[u]+=p*(n&&h?-1:1)}return m}function l(t){return\"number\"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function c(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function f(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:r,rects:s,elements:a,strategy:f}=t,{boundary:u=\"clippingAncestors\",rootBoundary:d=\"viewport\",elementContext:p=\"floating\",altBoundary:h=!1,padding:m=0}=e,g=l(m),w=a[h?\"floating\"===p?\"reference\":\"floating\":p],v=c(await r.getClippingRect({element:null==(n=await(null==r.isElement?void 0:r.isElement(w)))||n?w:w.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(a.floating)),boundary:u,rootBoundary:d})),y=c(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:\"floating\"===p?{...s.floating,x:o,y:i}:s.reference,offsetParent:await(null==r.getOffsetParent?void 0:r.getOffsetParent(a.floating)),strategy:f}):s[p]);return{top:v.top-y.top+g.top,bottom:y.bottom-v.bottom+g.bottom,left:v.left-y.left+g.left,right:y.right-v.right+g.right}}const u=Math.min,d=Math.max;function p(t,e,n){return d(t,u(e,n))}const h=t=>({name:\"arrow\",options:t,async fn(e){const{element:n,padding:o=0}=null!=t?t:{},{x:i,y:a,placement:c,rects:f,platform:u}=e;if(null==n)return{};const d=l(o),h={x:i,y:a},m=r(c),g=s(m),w=await u.getDimensions(n),v=\"y\"===m?\"top\":\"left\",y=\"y\"===m?\"bottom\":\"right\",b=f.reference[g]+f.reference[m]-h[m]-f.floating[g],x=h[m]-f.reference[m],E=await(null==u.getOffsetParent?void 0:u.getOffsetParent(n)),T=E?\"y\"===m?E.clientHeight||0:E.clientWidth||0:0,R=b/2-x/2,_=d[v],L=T-w[g]-d[y],S=T/2-w[g]/2+R,k=p(_,S,L);return{data:{[m]:k,centerOffset:S-k}}}}),m={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function g(t){return t.replace(/left|right|bottom|top/g,(t=>m[t]))}function w(t,e,n){void 0===n&&(n=!1);const o=i(t),a=r(t),l=s(a);let c=\"x\"===a?o===(n?\"end\":\"start\")?\"right\":\"left\":\"start\"===o?\"bottom\":\"top\";return e.reference[l]>e.floating[l]&&(c=g(c)),{main:c,cross:g(c)}}const v={start:\"end\",end:\"start\"};function y(t){return t.replace(/start|end/g,(t=>v[t]))}const b=[\"top\",\"right\",\"bottom\",\"left\"],x=b.reduce(((t,e)=>t.concat(e,e+\"-start\",e+\"-end\")),[]);const E=function(t){return void 0===t&&(t={}),{name:\"autoPlacement\",options:t,async fn(e){var n,r,s,a,l;const{x:c,y:u,rects:d,middlewareData:p,placement:h,platform:m,elements:g}=e,{alignment:v=null,allowedPlacements:b=x,autoAlignment:E=!0,...T}=t,R=function(t,e,n){return(t?[...n.filter((e=>i(e)===t)),...n.filter((e=>i(e)!==t))]:n.filter((t=>o(t)===t))).filter((n=>!t||i(n)===t||!!e&&y(n)!==n))}(v,E,b),_=await f(e,T),L=null!=(n=null==(r=p.autoPlacement)?void 0:r.index)?n:0,S=R[L],{main:k,cross:O}=w(S,d,await(null==m.isRTL?void 0:m.isRTL(g.floating)));if(h!==S)return{x:c,y:u,reset:{skip:!1,placement:R[0]}};const D=[_[o(S)],_[k],_[O]],H=[...null!=(s=null==(a=p.autoPlacement)?void 0:a.overflows)?s:[],{placement:S,overflows:D}],C=R[L+1];if(C)return{data:{index:L+1,overflows:H},reset:{skip:!1,placement:C}};const A=H.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),P=null==(l=A.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:l.placement;return{reset:{placement:null!=P?P:A[0].placement}}}}};const T=function(t){return void 0===t&&(t={}),{name:\"flip\",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h=\"bestFit\",flipAlignment:m=!0,...v}=t,b=o(i),x=p||(b===a||!m?[g(a)]:function(t){const e=g(t);return[y(t),e,y(e)]}(a)),E=[a,...x],T=await f(e,v),R=[];let _=(null==(n=r.flip)?void 0:n.overflows)||[];if(u&&R.push(T[b]),d){const{main:t,cross:e}=w(i,s,await(null==l.isRTL?void 0:l.isRTL(c.floating)));R.push(T[t],T[e])}if(_=[..._,{placement:i,overflows:R}],!R.every((t=>t<=0))){var L,S;const t=(null!=(L=null==(S=r.flip)?void 0:S.index)?L:0)+1,e=E[t];if(e)return{data:{index:t,overflows:_},reset:{skip:!1,placement:e}};let n=\"bottom\";switch(h){case\"bestFit\":{var k;const t=null==(k=_.slice().sort(((t,e)=>t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)-e.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)))[0])?void 0:k.placement;t&&(n=t);break}case\"initialPlacement\":n=a}return{reset:{placement:n}}}return{}}}};function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function _(t){return b.some((e=>t[e]>=0))}const L=function(t){let{strategy:e=\"referenceHidden\",...n}=void 0===t?{}:t;return{name:\"hide\",async fn(t){const{rects:o}=t;switch(e){case\"referenceHidden\":{const e=R(await f(t,{...n,elementContext:\"reference\"}),o.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:_(e)}}}case\"escaped\":{const e=R(await f(t,{...n,altBoundary:!0}),o.floating);return{data:{escapedOffsets:e,escaped:_(e)}}}default:return{}}}}};const S=function(t){return void 0===t&&(t=0),{name:\"offset\",options:t,async fn(e){const{x:n,y:s,placement:a,rects:l,platform:c,elements:f}=e,u=function(t,e,n,s){void 0===s&&(s=!1);const a=o(t),l=i(t),c=\"x\"===r(t),f=[\"left\",\"top\"].includes(a)?-1:1;let u=1;\"end\"===l&&(u=-1),s&&c&&(u*=-1);const d=\"function\"==typeof n?n({...e,placement:t}):n,{mainAxis:p,crossAxis:h}=\"number\"==typeof d?{mainAxis:d,crossAxis:0}:{mainAxis:0,crossAxis:0,...d};return c?{x:h*u,y:p*f}:{x:p*f,y:h*u}}(a,l,t,await(null==c.isRTL?void 0:c.isRTL(f.floating)));return{x:n+u.x,y:s+u.y,data:u}}}};const k=function(t){return void 0===t&&(t={}),{name:\"size\",options:t,async fn(e){const{placement:n,rects:r,platform:s,elements:a}=e,{apply:l,...c}=t,u=await f(e,c),p=o(n),h=i(n);let m,g;\"top\"===p||\"bottom\"===p?(m=p,g=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?\"start\":\"end\")?\"left\":\"right\"):(g=p,m=\"end\"===h?\"top\":\"bottom\");const w=d(u.left,0),v=d(u.right,0),y=d(u.top,0),b=d(u.bottom,0),x={height:r.floating.height-([\"left\",\"right\"].includes(n)?2*(0!==y||0!==b?y+b:d(u.top,u.bottom)):u[m]),width:r.floating.width-([\"top\",\"bottom\"].includes(n)?2*(0!==w||0!==v?w+v:d(u.left,u.right)):u[g])};return null==l||l({...x,...r}),{reset:{rects:!0}}}}};function O(t){return\"[object Window]\"===(null==t?void 0:t.toString())}function D(t){if(null==t)return window;if(!O(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function H(t){return D(t).getComputedStyle(t)}function C(t){return O(t)?\"\":t?(t.nodeName||\"\").toLowerCase():\"\"}function A(t){return t instanceof D(t).HTMLElement}function P(t){return t instanceof D(t).Element}function W(t){return t instanceof D(t).ShadowRoot||t instanceof ShadowRoot}function z(t){const{overflow:e,overflowX:n,overflowY:o}=H(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function M(t){return[\"table\",\"td\",\"th\"].includes(C(t))}function N(t){const e=navigator.userAgent.toLowerCase().includes(\"firefox\"),n=H(t);return\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||[\"transform\",\"perspective\"].includes(n.willChange)||e&&\"filter\"===n.willChange||e&&!!n.filter&&\"none\"!==n.filter}const U=Math.min,j=Math.max,B=Math.round;function F(t,e){void 0===e&&(e=!1);const n=t.getBoundingClientRect();let o=1,i=1;return e&&A(t)&&(o=t.offsetWidth>0&&B(n.width)/t.offsetWidth||1,i=t.offsetHeight>0&&B(n.height)/t.offsetHeight||1),{width:n.width/o,height:n.height/i,top:n.top/i,right:n.right/o,bottom:n.bottom/i,left:n.left/o,x:n.left/o,y:n.top/i}}function V(t){return(e=t,(e instanceof D(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function q(t){return O(t)?{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}:{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function X(t){return F(V(t)).left+q(t).scrollLeft}function Y(t,e,n){const o=A(e),i=V(e),r=F(t,o&&function(t){const e=F(t);return B(e.width)!==t.offsetWidth||B(e.height)!==t.offsetHeight}(e));let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(o||!o&&\"fixed\"!==n)if((\"body\"!==C(e)||z(i))&&(s=q(e)),A(e)){const t=F(e,!0);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}else i&&(a.x=X(i));return{x:r.left+s.scrollLeft-a.x,y:r.top+s.scrollTop-a.y,width:r.width,height:r.height}}function I(t){return\"html\"===C(t)?t:t.assignedSlot||t.parentNode||(W(t)?t.host:null)||V(t)}function G(t){return A(t)&&\"fixed\"!==getComputedStyle(t).position?t.offsetParent:null}function J(t){const e=D(t);let n=G(t);for(;n&&M(n)&&\"static\"===getComputedStyle(n).position;)n=G(n);return n&&(\"html\"===C(n)||\"body\"===C(n)&&\"static\"===getComputedStyle(n).position&&!N(n))?e:n||function(t){let e=I(t);for(W(e)&&(e=e.host);A(e)&&![\"html\",\"body\"].includes(C(e));){if(N(e))return e;e=e.parentNode}return null}(t)||e}function K(t){if(A(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=F(t);return{width:e.width,height:e.height}}function Q(t){return[\"html\",\"body\",\"#document\"].includes(C(t))?t.ownerDocument.body:A(t)&&z(t)?t:Q(I(t))}function Z(t,e){var n;void 0===e&&(e=[]);const o=Q(t),i=o===(null==(n=t.ownerDocument)?void 0:n.body),r=D(o),s=i?[r].concat(r.visualViewport||[],z(o)?o:[]):o,a=e.concat(s);return i?a:a.concat(Z(I(s)))}function $(t,e){return\"viewport\"===e?c(function(t){const e=D(t),n=V(t),o=e.visualViewport;let i=n.clientWidth,r=n.clientHeight,s=0,a=0;return o&&(i=o.width,r=o.height,Math.abs(e.innerWidth/o.scale-o.width)<.01&&(s=o.offsetLeft,a=o.offsetTop)),{width:i,height:r,x:s,y:a}}(t)):P(e)?function(t){const e=F(t),n=e.top+t.clientTop,o=e.left+t.clientLeft;return{top:n,left:o,x:o,y:n,right:o+t.clientWidth,bottom:n+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e):c(function(t){var e;const n=V(t),o=q(t),i=null==(e=t.ownerDocument)?void 0:e.body,r=j(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=j(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let a=-o.scrollLeft+X(t);const l=-o.scrollTop;return\"rtl\"===H(i||n).direction&&(a+=j(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}(V(t)))}function tt(t){const e=Z(I(t)),n=[\"absolute\",\"fixed\"].includes(H(t).position)&&A(t)?J(t):t;return P(n)?e.filter((t=>P(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&W(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&\"body\"!==C(t))):[]}const et={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o}=t;const i=[...\"clippingAncestors\"===n?tt(e):[].concat(n),o],r=i[0],s=i.reduce(((t,n)=>{const o=$(e,n);return t.top=j(o.top,t.top),t.right=U(o.right,t.right),t.bottom=U(o.bottom,t.bottom),t.left=j(o.left,t.left),t}),$(e,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=A(n),r=V(n);if(n===r)return e;let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&\"fixed\"!==o)&&((\"body\"!==C(n)||z(r))&&(s=q(n)),A(n))){const t=F(n,!0);a.x=t.x+n.clientLeft,a.y=t.y+n.clientTop}return{...e,x:e.x-s.scrollLeft+a.x,y:e.y-s.scrollTop+a.y}},isElement:P,getDimensions:K,getOffsetParent:J,getDocumentElement:V,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:Y(e,J(n),o),floating:{...K(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>\"rtl\"===H(t).direction};const nt=(t,e,n)=>(async(t,e,n)=>{const{placement:o=\"bottom\",strategy:i=\"absolute\",middleware:r=[],platform:s}=n,l=await(null==s.isRTL?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:u}=a(c,o,l),d=o,p={};const h=new Set;for(let n=0;n<r.length;n++){const{name:m,fn:g}=r[n];if(h.has(m))continue;const{x:w,y:v,data:y,reset:b}=await g({x:f,y:u,initialPlacement:o,placement:d,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});f=null!=w?w:f,u=null!=v?v:u,p={...p,[m]:{...p[m],...y}},b&&(\"object\"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:f,y:u}=a(c,d,l)),!1!==b.skip&&h.add(m)),n=-1)}return{x:f,y:u,placement:d,strategy:i,middlewareData:p}})(t,e,{platform:et,...n});var ot={top:\"bottom\",right:\"left\",bottom:\"top\",left:\"right\"},it=function(e,i,s,a,l,c){return t.__awaiter(void 0,void 0,void 0,(function(){var u,d,m,g,w,v,y,b,x,R,_,O,D,H,C,A,P,W,z,M,N,U,j,B,F,V,q,X,Y,I,G,J,K,Q,Z,$;return t.__generator(this,(function(tt){switch(tt.label){case 0:return m=void 0!==(d=(u={}).toFlip)&&d,w=void 0===(g=u.toShift)||g,v=e.placement,y=e.hideOnReferenceHidden,b=e.offset,x=e.hideOnTooltipEscape,R=e.arrowSizeScale,_=e.resetPlacementOnUpdate,O=e.arrow,D=n(i),H=D.arrow,C=12*R,s?(A=\"auto\"===v&&(l||_),P=\"auto\"!==v&&m,W=w&&l,z={middleware:t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray([S({mainAxis:b[0],crossAxis:b[1]})],A?[E()]:[],!0),W?[(et={padding:16},void 0===et&&(et={}),{name:\"shift\",options:et,async fn(t){const{x:e,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=et,u={x:e,y:n},d=await f(t,c),h=r(o(i)),m=\"x\"===h?\"y\":\"x\";let g=u[h],w=u[m];if(s){const t=\"y\"===h?\"bottom\":\"right\";g=p(g+d[\"y\"===h?\"top\":\"left\"],g,g-d[t])}if(a){const t=\"y\"===m?\"bottom\":\"right\";w=p(w+d[\"y\"===m?\"top\":\"left\"],w,w-d[t])}const v=l.fn({...t,[h]:g,[m]:w});return{...v,data:{x:v.x-e,y:v.y-n}}}})]:[],!0),P?[T({fallbackPlacements:[\"right\",\"left\"],fallbackStrategy:\"initialPlacement\"})]:[],!0),O?[h({element:H,padding:2})]:[],!0),[k({apply:function(t){t.width,t.height,t.reference,t.floating}}),L()],!1)},\"auto\"!==v&&(z.placement=v),[4,nt(s,i,z)]):[2];case 1:switch(M=tt.sent(),N=M.x,U=M.y,j=M.placement,B=M.middlewareData,F=B.hide,V=F.referenceHidden,q=F.escaped,B.arrow&&(X=B.arrow.x,Y=B.arrow.y),I=0!==B.arrow.centerOffset,G=y&&V||x&&q||a?\"hidden\":\"visible\",i.setAttribute(\"data-state\",G),Object.assign(i.style,{visibility:G,left:N+\"px\",top:U+\"px\"}),J=ot[j.split(\"-\")[0]],K=0,Q=0,Z=0,Z=null!==X?X+C+\"px\":\"\",J){case\"top\":K=1/1.7,Z=null!==X?X+C*K+\"px\":\"\";break;case\"bottom\":K=.5,Z=null!==X?X+C*K+\"px\":\"\";break;case\"left\":K=.005,Z=null!==X?X+\"px\":\"\",Q=null!==Y?Y-C*K/2+\"px\":\"\";break;case\"right\":K=1.2,Z=null!==X?X+\"px\":\"\",Q=null!==Y?Y-C*K/2+\"px\":\"\"}return Q=null!==Y?Y-C*K/2+\"px\":\"\",Q=null!==Y?Y+\"px\":\"\",Object.assign(H.style,(($={visibility:I?\"hidden\":\"visible\",left:Z,top:Q,right:\"\",bottom:\"\"})[J]=\"-\"+C*K+\"px\",$)),l?console.log(\"setting state after newlyShown\"):console.log(\"setting state on update\"),c({isShown:\"visible\"===G,fui:M}),[2,M]}var et}))}))},rt={allowHTML:!0,content:\"\",arrow:!0,transitionDuration:[300,250],offset:[10,0],hideOnClick:!0,onClickOutside:function(t,e){},onShow:function(t){},onHide:function(t){},onRemove:function(){},placement:\"top\",resetPlacementOnUpdate:!1,hideOnTooltipEscape:!0,hideOnReferenceHidden:!0,showOnCreate:!0,maxWidth:350,updateDebounce:100,zIndex:99999,arrowSizeScale:1,updateOnEvents:\"resize scroll\"};function st(t,e){return 0===e?t:function(o){clearTimeout(n),n=setTimeout((function(){t(o)}),e)};var n}function at(t,e,n){var o=e+\"EventListener\";[\"transitionend\",\"webkitTransitionEnd\",\"oTransitionEnd\"].forEach((function(e){t[o](e,n)}))}var lt=function(){function o(t,e){var n,o=this;this.state={isShown:!1,isRemoved:!1,fui:void 0},this.toHideTooltip=!1,this.transitionDuration=0,this.clickHandler=function(t){o.state.isShown&&(o.tooltipElement.contains(t.target)||o.reference.contains(t.target)||o.props.onClickOutside&&o.props.onClickOutside(o,t),\"target\"===o.props.hideOnClick?t.target===o.reference&&o.hide():o.props.hideOnClick&&o.hide())},this.props=t,this.reference=e,window.tp=this,(n=document.createElement(\"style\")).type=\"text/css\",n.setAttribute(\"floating-ui-tooltip-default\",\"\"),n.textContent=\".floating-ui-tooltip-root{--color:#fff;--border-color:#fefefe;--border-color:red;backface-visibility:hidden;background:var(--color);border-radius:6px;box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);display:flex;font-size:90%;line-height:0px;margin:0;max-width:calc(100vw - 10px);padding:0;position:absolute;transition-duration:.2s;transition-property:transform,visibility,opacity;transition-timing-function:cubic-bezier(.54,1.5,.38,1.11);z-index:9999}.floating-ui-tooltip-arrow{box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);height:14px;position:absolute;transform:translateX(-50%) rotate(45deg);width:14px;z-index:-1}.floating-ui-tooltip-box{border-radius:inherit;line-height:normal;margin:0;outline:0;position:relative}.floating-ui-tooltip-root[data-state=hidden]{opacity:0}.floating-ui-tooltip-root[data-state=visible]{opacity:1}.floating-ui-tooltip-content{background-color:#fff;border-radius:inherit;color:#111;padding:0;position:relative;z-index:2}.floating-ui-tooltip-arrow,.floating-ui-tooltip-root{background:var(--color)}\",document.head.appendChild(n)}return o.prototype.hookEventListeners=function(){var t=this;this.debouncedUpdate=st(this.update.bind(this),this.props.updateDebounce),this.autoUpdateCleanup=function(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:s=!0,animationFrame:a=!1}=o;let l=!1;const c=i&&!a,f=r&&!a,u=s&&!a,d=c||f?[...P(t)?Z(t):[],...Z(e)]:[];d.forEach((t=>{c&&t.addEventListener(\"scroll\",n,{passive:!0}),f&&t.addEventListener(\"resize\",n)}));let p,h=null;u&&(h=new ResizeObserver(n),P(t)&&h.observe(t),h.observe(e));let m=a?F(t):null;return a&&function e(){if(l)return;const o=F(t);!m||o.x===m.x&&o.y===m.y&&o.width===m.width&&o.height===m.height||n(),m=o,p=requestAnimationFrame(e)}(),()=>{var t;l=!0,d.forEach((t=>{c&&t.removeEventListener(\"scroll\",n),f&&t.removeEventListener(\"resize\",n)})),null==(t=h)||t.disconnect(),h=null,a&&cancelAnimationFrame(p)}}(this.reference,this.tooltipElement,(function(){return t.debouncedUpdate(void 0)})),this.props.updateOnEvents.split(\" \").forEach((function(e){window.addEventListener(e,(function(){return t.debouncedUpdate(void 0)}))})),window.addEventListener(\"click\",this.clickHandler.bind(this))},o.prototype.updateTransitionDuration=function(t){this.transitionDuration=t,this.tooltipElement.style.transitionDuration=t+\"ms\"},o.prototype.create=function(){return t.__awaiter(this,void 0,void 0,(function(){var o,i,r,s,a;return t.__generator(this,(function(t){switch(t.label){case 0:return o=!this.props.showOnCreate,this.tooltipElement=(l=e(),c=e(),f=e(),u=e(),l.className=\"floating-ui-tooltip-root\",c.className=\"floating-ui-tooltip-box\",f.className=\"floating-ui-tooltip-content\",u.className=\"floating-ui-tooltip-arrow\",c.appendChild(f),c.appendChild(u),l.appendChild(c),f.innerHTML='\\n    <div id=\"tooltip-container\">\\n    <h3>Default tooltip</h3>\\n    </div>\\n  ',c.setAttribute(\"role\",\"tooltip\"),l.setAttribute(\"data-state\",\"\"),Object.assign(l.style,{visibility:\"hidden\",left:\"0px\",top:\"0px\"}),l),this.updateTransitionDuration(this.props.transitionDuration[0]),i=n(this.tooltipElement).content,r=this.props,s=r.allowHTML,a=r.content,s?i.innerHTML=a:i.innerText=\"\"+a,document.body.appendChild(this.tooltipElement),[4,it(this.props,this.tooltipElement,this.reference,o,!0,this.setState.bind(this))];case 1:return t.sent(),this.hookEventListeners(),[2]}var l,c,f,u}))}))},o.prototype.getState=function(){return this.state},o.prototype.setState=function(e){var n=this,o=void 0!==e.isShown&&e.isShown!==this.state.isShown;if(o&&e.isShown){var i=st(this.props.onShow,0);this.transitionDuration?function(t,e){function n(o){o.target===t&&(at(t,\"remove\",n),e(),console.log(\"transition end for event \"+o))}at(t,\"remove\",n),at(t,\"add\",n)}(this.tooltipElement,(function(){i(n)})):i(this)}this.state=t.__assign(t.__assign({},this.state),e),o&&!e.isShown&&this.props.onHide(this)},o.prototype.update=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return e=e||this.toHideTooltip||!1,[4,it(this.props,this.tooltipElement,this.reference,e,!1,this.setState.bind(this))];case 1:return t.sent(),[2]}}))}))},o.prototype.hide=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!0,[4,this.update(!0)];case 1:return t.sent(),this.updateTransitionDuration(this.props.transitionDuration[0]),[2]}}))}))},o.prototype.show=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!1,[4,this.update(!1)];case 1:return t.sent(),this.updateTransitionDuration(this.props.transitionDuration[1]),[2]}}))}))},o.prototype.remove=function(){var t=this;this.tooltipElement.remove(),this.state={isShown:!1,isRemoved:!0,fui:void 0},this.autoUpdateCleanup(),window.removeEventListener(\"click\",this.clickHandler.bind(this)),this.props.updateOnEvents.split(\" \").forEach((function(e){window.removeEventListener(e,t.debouncedUpdate)})),this.props.onRemove()},o}();return function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var o,i,r,s,a;return t.__generator(this,(function(l){switch(l.label){case 0:return o=n.placement||rt.placement,i=n.transitionDuration||rt.transitionDuration,r=rt.offset,console.log(n.offset),Object.keys(n).forEach((function(t){return void 0===n[t]&&delete n[t]})),s=t.__assign(t.__assign(t.__assign({},rt),n),{placement:o,transitionDuration:i,offset:r}),[4,(a=new lt(s,e)).create()];case 1:return l.sent(),[2,{props:a.props,reference:a.reference,getState:a.getState.bind(a),show:a.show.bind(a),hide:a.hide.bind(a),remove:a.remove.bind(a),update:a.update.bind(a)}]}}))}))}}));\n//# sourceMappingURL=index.js.map\n","/* import floatingTooltip from 'floating-ui-tooltip/dev/index';\nimport { Instance } from 'floating-ui-tooltip/dev/types'; */\nimport floatingTooltip from 'floating-ui-tooltip';\nimport { Instance, Props } from 'floating-ui-tooltip/dist/types';\n\nconst createTooltip = async (props): Promise<Instance> => {\n\n    let {\n        target,\n        remove,\n        content,\n        arrow,\n        offset,\n        placement,\n        onShow,\n        onHide,\n        onClickOutside\n    } = props;\n\n    if (!remove) {\n        remove = () => {};\n    }\n\n    return floatingTooltip(target, {\n        allowHTML: true,\n        zIndex: 99999,\n        hideOnClick: false,\n        onClickOutside,\n        onShow,\n        onHide,\n        content,\n        arrow,\n        offset,\n        placement,\n        showOnCreate: true,\n    });\n};\n\nexport default createTooltip;\n","import { styleObjectToString } from \"../common/utils\";\nimport renderProgressBar from \"../common/progressBar\";\nimport renderCloseXButton from \"../common/closeXButton\";\nimport createTooltip from \"../common/createTooltip\";\nimport { DEFAULT_TOOLTIP_BORDER_RADIUS } from \"../common/constants\";\nimport { log } from \"../common/logger\";\n\nconst defaultBodyContent = `\n  <h3 style=\"font-weight: bold;\">Default title</h3>\n  <p style=\"font-weight: normal;\">Default tooltip content</p>\n`;\n\nconst renderNavButtons = (navSection: any): string => {\n    const { nextButton, prevButton, dismissLink } = navSection;\n\n    return `\n    <style>\n    .lusift .tooltip section.nav-buttons{\n      ${styleObjectToString(navSection.styleProps)}\n    }\n    .lusift .tooltip .nav-buttons .next{\n      ${styleObjectToString(nextButton.styleProps)}\n    }\n    .lusift .tooltip .nav-buttons .prev{\n      ${styleObjectToString(prevButton.styleProps)}\n    }\n    </style>\n\n    <section class=\"nav-buttons\">\n      ${\n          dismissLink.disabled\n              ? \"\"\n              : `\n        <button onclick=\"Lusift.close()\" class=\"close dismiss-link\">\n          skip this\n        </button>\n        `\n      }\n      ${\n          prevButton.disabled\n              ? \"\"\n              : `<button onclick=\"Lusift.prev()\" class=\"prev lusift-button\">Prev</button>`\n      }\n      ${\n          nextButton.disabled\n              ? \"\"\n              : `<button onclick=\"Lusift.next()\" class=\"next lusift-button\">Next</button>`\n      }\n    </section>\n  `;\n};\n\nconst renderTooltip = async ({ data, target, styleProps, actions, uid, index, onShow, onHide }) => {\n    const { closeButton, navSection } = actions;\n    const {\n        arrow,\n        // bodyContent = defaultBodyContent,\n        placement,\n        offset,\n    } = data;\n\n    const content = `\n    <style>\n      .tippy-box{\n        border-radius: ${DEFAULT_TOOLTIP_BORDER_RADIUS};\n        ${styleObjectToString(styleProps)}\n      }\n    </style>\n\n    <div class=\"lusift\">\n      ${renderProgressBar()}\n      <div class=\"tooltip\" id=\"tooltip-${uid}\">\n        ${renderCloseXButton(closeButton, \"tooltip\")}\n        <section class=\"body-content\">\n        </section>\n        ${renderNavButtons(navSection)}\n      </div>\n    <div>\n  `;\n\n    const tooltipInstance = await createTooltip({\n        target,\n        content,\n        arrow,\n        offset,\n        placement,\n        remove: () => {},\n        onShow,\n        onHide,\n    });\n\n    // tooltipInstance.show();\n\n    const Lusift = window[\"Lusift\"];\n\n    const bodyContent =\n        Lusift.content[Lusift.activeGuide.id].data.steps[index].data.bodyContent ||\n        defaultBodyContent;\n\n    Lusift.render(bodyContent, \".lusift > .tooltip > .body-content\", () => {\n        tooltipInstance.update();\n    });\n\n    return tooltipInstance;\n};\n\nexport default renderTooltip;\n","export default {\n    styleProps: {},\n    closeButton: {\n        styleProps: {},\n        disabled: false,\n    },\n    navSection: {\n        styleProps: {},\n        nextButton: {\n            text: \"next\",\n            styleProps: {},\n            disabled: false,\n        },\n        prevButton: {\n            text: \"prev\",\n            styleProps: {},\n            disabled: true,\n        },\n        dismissLink: {\n            text: \"skip this\",\n            styleProps: {},\n            disabled: true,\n        },\n    },\n};\n","import { document, window } from \"global\";\nimport {\n    styleObjectToString,\n    getStepUID,\n    onElementResize,\n    getElementPosition,\n    roundNum,\n    addFocusTrap,\n    getScrollBarWidth,\n} from \"../common/utils/\";\nimport { log, warn, error } from \"../common/logger\";\nimport { BackdropData } from \"../common/types\";\n\nconst areNumbersEqual = (num1: number, num2: number): boolean => {\n    let num1Precision = num1.toString().substring(num1.toString().indexOf(\".\")).length - 1;\n    if (num1.toString().indexOf(\".\") == -1) num1Precision = 0;\n\n    let num2Precision = num2.toString().substring(num2.toString().indexOf(\".\")).length - 1;\n    if (num2.toString().indexOf(\".\") == -1) num2Precision = 0;\n    let decimalPlaces = Math.min(num1Precision, num2Precision);\n    if (decimalPlaces > 2) {\n        decimalPlaces = 1; //most reliable precision\n    }\n    /* log(num1, num2)\n  log(num1Precision, num2Precision, decimalPlaces);\n\n  log(roundNum(num1, decimalPlaces), roundNum(num2, decimalPlaces)); */\n\n    return roundNum(num1, decimalPlaces) === roundNum(num2, decimalPlaces);\n};\n\nfunction getFocusableElements(root) {\n    var FOCUS_SENTINEL_CLASS = 'mdc-dom-focus-sentinel';\n    var focusableEls = [].slice.call(root.querySelectorAll('[autofocus], [tabindex], a, input, textarea, select, button'));\n    log(focusableEls)\n    return focusableEls.filter(function (el: HTMLElement) {\n        var isDisabledOrHidden = el.getAttribute('aria-disabled') === 'true' ||\n            el.getAttribute('disabled') != null ||\n            el.getAttribute('hidden') != null ||\n            el.getAttribute('aria-hidden') === 'true';\n        var isTabbableAndVisible = el.tabIndex >= 0 &&\n            el.getBoundingClientRect().width > 0 &&\n            !el.classList.contains(FOCUS_SENTINEL_CLASS) && !isDisabledOrHidden;\n        var isProgrammaticallyHidden = false;\n        if (isTabbableAndVisible) {\n            var style = getComputedStyle(el);\n            isProgrammaticallyHidden =\n                style.display === 'none' || style.visibility === 'hidden';\n        }\n        return isTabbableAndVisible && !isProgrammaticallyHidden;\n    });\n};\n\nObject[\"fromEntries\"] = arr => Object.assign({}, ...arr.map(([k, v]) => ({ [k]: v })));\nconst getDefinedProps = obj =>\n    Object[\"fromEntries\"](Object.entries(obj).filter(([k, v]) => v !== undefined));\n\nclass Backdrop {\n    private targetSelector: string;\n    private timers: {\n        id: number;\n        object: ReturnType<typeof window.setTimeout>;\n    }[] = [];\n    readonly stagedTargetClass: string;\n    readonly overlaySelectorClass: string = \"lusift-backdrop-overlay\";\n    private data: BackdropData = {\n        stageGap: 5,\n        opacity: \"0.5\",\n        color: \"#444\",\n    };\n    private toStopOverlay: boolean = false;\n    private resizeObservers: any[] = [];\n    private focusTrap: any;\n\n    constructor({\n        targetSelector,\n        guideID,\n        index,\n        data,\n    }: {\n        targetSelector: string;\n        index: number;\n        guideID: string;\n        data: any;\n    }) {\n        const uid = getStepUID({ guideID, index, type: \"backdrop\" });\n        this.stagedTargetClass = `${uid}__target`;\n\n        this.data = Object.assign({}, this.data, getDefinedProps(data));\n        this.targetSelector = targetSelector;\n\n        this.createOverlay();\n\n        // trap focus inside tooltip\n        this.focusTrap = addFocusTrap({\n            target: [\".lusift > .tooltip\", this.targetSelector],\n            escToClose: false,\n            clickOutsideToClose: false,\n        });\n\n        this.resetBackdrop = this.resetBackdrop.bind(this);\n        this.resizeObservers.push(\n            onElementResize(\n                document.querySelector(`.${this.overlaySelectorClass}`),\n                this.resetBackdrop,\n            ),\n        );\n        this.resizeObservers.push(onElementResize(document.body, this.resetBackdrop));\n    }\n\n    private resetBackdrop(): void {\n        const timeoutID = this.timers.length;\n\n        const timeout = window.setTimeout(() => {\n            // HACK: intervene in the event backdrop has already been closed and there's a rogue timeout: rare\n            if (this.toStopOverlay) return error(`Lusift: This overlay instance should be removed`);\n            this.removeOverlay();\n            this.createOverlay();\n            this.timers = this.timers.filter(({ id }) => id !== timeoutID);\n        }, 300);\n\n        this.timers.push({\n            id: timeoutID,\n            object: timeout,\n        });\n    }\n\n    private getDocumentDimensions(): { documentWidth: number; documentHeight: number } {\n        const { height: clientHeight, width: clientWidth } = getElementPosition(\n            document.documentElement,\n        );\n\n        const documentWidth = Math.max(\n            clientWidth,\n            document.body[\"scrollWidth\"],\n            document.documentElement[\"scrollWidth\"],\n            document.body[\"offsetWidth\"],\n            document.documentElement[\"offsetWidth\"],\n        );\n        const documentHeight = Math.max(\n            clientHeight,\n            document.body.scrollHeight,\n            document.documentElement.scrollHeight,\n            document.body.offsetHeight,\n            document.documentElement.offsetHeight,\n        );\n\n        return {\n            documentWidth,\n            documentHeight,\n        };\n    }\n\n    private createOverlay(): void {\n        /* document.documentElement.style.overflow = 'hidden';\n   document.body.scroll = \"no\"; */\n        const targetElement = document.querySelector(this.targetSelector);\n        const padding = this.data.stageGap;\n\n        const { documentHeight, documentWidth } = this.getDocumentDimensions();\n\n        const targetPosition = getElementPosition(targetElement);\n\n        const hTop = document.createElement(\"div\");\n        hTop.id = \"hTop\";\n        const hBottom = document.createElement(\"div\");\n        hBottom.id = \"hBottom\";\n\n        const vLeft = document.createElement(\"div\");\n        vLeft.id = \"vLeft\";\n        const vRight = document.createElement(\"div\");\n        vRight.id = \"vRight\";\n\n        const overlayStyle = {\n            opacity: \"0.5\",\n            background: \"#444\",\n            position: \"absolute\",\n            top: \"0\",\n            bottom: \"0\",\n            left: \"0\",\n            right: \"0\",\n            zIndex: 998,\n            border: \"1px solid transparent\",\n        };\n\n        hTop.style.cssText = styleObjectToString({\n            ...overlayStyle,\n            height: `${targetPosition.bottom - targetPosition.height - padding}px`,\n            width: `${targetPosition.right - targetPosition.left + 2 * padding}px`,\n            left: `${targetPosition.left - padding}px`,\n            bottom: `${targetPosition.top - padding}px`,\n        });\n\n        hBottom.style.cssText = styleObjectToString({\n            ...overlayStyle,\n            height: `${documentHeight - (targetPosition.top + targetPosition.height + padding)}px`,\n            width: `${targetPosition.right - targetPosition.left + 2 * padding}px`,\n            left: `${targetPosition.left - padding}px`,\n            top: `${targetPosition.bottom + padding}px`,\n        });\n\n        vLeft.style.cssText = styleObjectToString({\n            ...overlayStyle,\n            width: `${targetPosition.left - padding}px`,\n            height: `${documentHeight}px`,\n            right: `${targetPosition.left - padding}px`,\n        });\n\n        vRight.style.cssText = styleObjectToString({\n            ...overlayStyle,\n            width: `${documentWidth - (targetPosition.left + targetPosition.width) - padding}px`,\n            height: `${documentHeight}px`,\n            left: `${targetPosition.right + padding}px`,\n        });\n\n        [hTop, hBottom, vLeft, vRight].forEach(el => {\n            el.classList.add(this.overlaySelectorClass);\n            document.body.appendChild(el);\n        });\n        targetElement.classList.add(this.stagedTargetClass);\n\n        // See that the overlay isn't glitchy, reset if it is\n        const { height: hTopHeight, width: hTopWidth } = getElementPosition(hTop);\n        const { height: hBottomHeight } = getElementPosition(hBottom);\n        const vLeftWidth = getElementPosition(vLeft).width;\n        const vRightWidth = getElementPosition(vRight).width;\n\n        const overlaySumWidth = hTopWidth + vLeftWidth + vRightWidth;\n        const overlaySumHeight = hTopHeight + hBottomHeight + targetPosition.height + 2 * padding;\n\n        /* log(screenWidth, overlaySumWidth);\n    log(screenHeight, overlaySumHeight); */\n\n        if (\n            !areNumbersEqual(documentWidth, overlaySumWidth) ||\n            !areNumbersEqual(documentHeight, overlaySumHeight)\n        ) {\n            this.resetBackdrop();\n        }\n    }\n\n    private removeOverlay(): void {\n        document.querySelectorAll(`.${this.overlaySelectorClass}`).forEach((el: HTMLElement) => {\n            if (el) el.remove();\n        });\n\n        const targetElement = document.querySelector(this.targetSelector);\n        if (targetElement) targetElement.classList.remove(this.stagedTargetClass);\n    }\n\n    public remove(): void {\n        // log('removing Backdrop');\n        // remove event listeners and timers\n        this.timers = this.timers.filter(({ object }) => window.clearTimeout(object));\n        this.toStopOverlay = true;\n        this.resizeObservers = this.resizeObservers.filter(ro => ro.disconnect());\n        if (this.focusTrap) {\n            this.focusTrap.deactivate();\n        }\n        this.removeOverlay();\n    }\n}\n\nexport default Backdrop;\n","import { document, window } from \"global\";\nimport createTooltip from \"./createTooltip\";\nimport { mergeObjects, getStepUID } from \"../common/utils\";\nimport { log, warn, error } from \"../common/logger\";\nimport { TooltipData, HotspotAndTooltipTarget as Target, StepActions } from \"../common/types\";\nimport defaultToolipActions from \"./defaultTooltipActions\";\nimport Backdrop from \"../backdrop\";\n\nconst defaultBackdropData = {\n    disabled: false,\n    color: \"#444\",\n    opacity: \"0.5\",\n    stageGap: 5,\n    nextOnOverlayClick: false,\n};\n\nconst defaultOffset = [0, 10];\n\n// TODO: focus-trap not detecting tabbable elements\n// TODO: offset value is weird\n// TODO: offset, should it factor in arrow size on top?\n// TODO: tooltip is below backdrop\n// TODO: should we have transition effects for backdrop? it's kind of jerky\n// -- refactor to have zIndex for tooltip and backdrop as constants\n// TODO: Fix style.css margins for progress-bar and close button\n// TODO: Make the progress bar overflow because of border-radius not show\n// TODO: Add debounce function in Backdrop\n// TODO: Replace resize-observer with some native implementation\n// TODO: Transfer focus to tooltip if there's backdrop, addFocusTrap.ts\n\n/*\n * TODO: Add this scroll behaviour\n   if (this.data.scrollIntoView) {\n       this.targetElement.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n        inline: \"center\",\n        });\n    }\n    --\nhttps://stackoverflow.com/questions/123999/how-can-i-tell-if-a-dom-element-is-visible-in-the-current-viewport\n */\nexport default class Tooltip {\n    private targetElement: HTMLElement;\n    readonly target: Target;\n    private fuitInstance: any;\n    readonly uid: string;\n    readonly data: Partial<TooltipData>;\n    private actions: StepActions = defaultToolipActions;\n    readonly styleProps: Object = {};\n    private targetsAndEventListeners: {\n        method: string;\n        target: HTMLElement;\n        eventType: string;\n    }[] = [];\n    private backdropInstance: any;\n    private index: number;\n    private guideID: string;\n    private isTooltipShown: boolean = false;\n\n    constructor({\n        target,\n        guideID,\n        index,\n        data,\n        actions,\n        styleProps,\n    }: {\n        target: Target;\n        guideID: string;\n        data: Partial<TooltipData>;\n        index: number;\n        actions: StepActions;\n        styleProps: Object;\n    }) {\n        log(\"%c Tooltip constructor! \", \"background: #222; color: #bada55\");\n\n        this.target = target;\n        const { elementSelector } = target;\n        this.styleProps = styleProps || {};\n        this.data = data;\n        this.index = index;\n\n        const progressOn = data.progressOn || {};\n        this.data.progressOn = {\n            eventType: \"click\",\n            elementSelector,\n            ...progressOn,\n        };\n\n        const backdrop = data.backdrop || {};\n        this.data.backdrop = {\n            ...defaultBackdropData,\n            ...backdrop,\n        };\n        this.data.offset = this.data.offset || defaultOffset;\n        if (!this.data.backdrop.disabled) {\n            this.data.offset[1] = this.data.offset[1] + this.data.backdrop.stageGap!;\n        }\n\n        this.consolidateActions(actions);\n        this.uid = getStepUID({ guideID, index, type: \"tooltip\" });\n        this.guideID = guideID;\n        this.targetElement = document.querySelector(elementSelector);\n        this.show();\n        log(\"tooltip started\");\n    }\n\n    private hide(): void {\n        // log('tooltip hide');\n        this.fuitInstance.hide();\n        this.removeAllEventListeners();\n        this.backdropInstance && this.backdropInstance.remove();\n        this.backdropInstance = null;\n        this.isTooltipShown = false;\n    }\n\n    private consolidateActions(actions: StepActions) {\n        // merge default actions with incoming actions provided by the developer(user)\n        this.actions = mergeObjects(this.actions, actions);\n    }\n\n    private addBackdrop(): void {\n        const { stageGap, opacity, color } = this.data.backdrop!;\n        const data = {\n            stageGap,\n            opacity,\n            color,\n        };\n        this.backdropInstance = new Backdrop({\n            targetSelector: this.target.elementSelector,\n            guideID: this.guideID,\n            index: this.index,\n            data,\n        });\n        if (this.data.backdrop!.nextOnOverlayClick) {\n            Array.from<HTMLElement>(\n                document.getElementsByClassName(this.backdropInstance.overlaySelectorClass),\n            ).forEach((target: HTMLElement) => {\n                this.addEventListenerToTarget(target, \"next\");\n            });\n        }\n    }\n\n    public async show() {\n        if (!this.targetElement) return error(\"Error: target element not found\");\n        if (this.isTooltipShown) return error(\"Tooltip is already displayed\");\n\n        const { progressOn, backdrop } = this.data;\n\n        const { eventType, disabled } = progressOn!;\n        disabled || this.addEventListenerToTarget(this.targetElement, \"next\", eventType);\n\n        if (!this.fuitInstance) {\n            // fuit was never initiated\n            const { uid, actions, styleProps, data, index } = this;\n            this.fuitInstance = await createTooltip({\n                uid,\n                target: this.targetElement,\n                actions,\n                styleProps,\n                data,\n                index,\n                onShow: (instance) => {\n                    backdrop!.disabled || this.addBackdrop.bind(this)();\n                    this.isTooltipShown = true;\n                },\n                onHide: (instance) => {\n                    if(!backdrop!.disabled) {\n                        this.backdropInstance && this.backdropInstance.remove();\n                        this.backdropInstance = null;\n                        this.isTooltipShown = false;\n                    }\n                },\n            });\n        } else {\n            // fuit was hidden\n            this.fuitInstance.show();\n        }\n    }\n\n    public remove(): void {\n        if (!this.isTooltipShown) return error(`Attempted to remove but tooltip is not shown`);\n        log(`removing tooltip ${this.uid}`);\n        this.removeAllEventListeners();\n        this.backdropInstance && this.backdropInstance.remove();\n        this.fuitInstance.remove();\n        this.fuitInstance = null;\n        this.isTooltipShown = false;\n    }\n\n    private getListenerFromMethod(method: string): EventListenerOrEventListenerObject {\n        switch (method) {\n            case \"next\":\n                return window.Lusift.next;\n            case \"prev\":\n                return window.Lusift.prev;\n            case \"close\":\n                return this.remove;\n            default:\n                return () => {};\n        }\n    }\n\n    private addEventListenerToTarget(\n        target: HTMLElement,\n        method = \"next\",\n        eventType = \"click\",\n    ): void {\n        // add this event listener at the creation of each tooltip step and\n        // remove it at removal of it\n        target.addEventListener(eventType, this.getListenerFromMethod(method));\n        this.targetsAndEventListeners.push({\n            method,\n            target,\n            eventType,\n        });\n    }\n\n    private removeAllEventListeners(): void {\n        this.targetsAndEventListeners.forEach(({ method, target, eventType }) => {\n            target.removeEventListener(eventType, this.getListenerFromMethod(method));\n            log(`remove event listener of type ${eventType} ` + `and method ${method}`);\n        });\n        this.targetsAndEventListeners = [];\n    }\n}\n","import createModal from \"./createModal\";\nimport { document, window } from \"global\";\nimport { getStepUID, addFocusTrap } from \"../common/utils\";\nimport { ModalData } from \"../common/types\";\nimport { MODAL_OVERLAY_CLASS } from \"../common/constants\";\n\nclass Modal {\n    private uid: string;\n    private data: ModalData = {};\n    private closeButton: any;\n    private focusTrap: any;\n    private index: number;\n\n    constructor({ index, guideID, data, closeButton }) {\n        this.uid = getStepUID({ guideID, type: \"modal\", index });\n        this.data = data || {};\n        this.index = index;\n        this.closeButton = closeButton;\n        this.addModal();\n\n        const { escToClose, clickOutsideToClose } = this.data;\n\n        this.focusTrap = addFocusTrap({\n            target: \".modal\",\n            escToClose,\n            clickOutsideToClose,\n        });\n\n        if (escToClose) {\n            window.addEventListener(\"keydown\", this.escEventListener, true);\n        }\n        if (clickOutsideToClose) {\n            const overlayElement = document.querySelector(`.${MODAL_OVERLAY_CLASS}`);\n            overlayElement.addEventListener(\"click\", this.overlayClickEventListener, true);\n        }\n    }\n\n    private escEventListener(e): void {\n        if (\n            (e.key == \"Escape\" || e.key == \"Esc\" || e.keyCode == 27) &&\n            e.target.nodeName == \"BODY\"\n        ) {\n            window.Lusift.close();\n        }\n    }\n    private overlayClickEventListener(e): void {\n        if (!e.target.classList.contains(\"modal\")) {\n            window.Lusift.close();\n        }\n    }\n\n    private addModal(): void {\n        const { bodyContent } = this.data;\n\n        createModal({\n            uid: this.uid,\n            index: this.index,\n            closeButton: this.closeButton,\n        });\n    }\n\n    private remove(): void {\n        const overlayElement = document.querySelector(`.${MODAL_OVERLAY_CLASS}`);\n        document.getElementById(this.uid).remove();\n        this.focusTrap.deactivate();\n\n        // remove event listeners\n        if (this.data.escToClose) {\n            window.removeEventListener(\"keydown\", this.escEventListener, true);\n        }\n        if (this.data.clickOutsideToClose) {\n            overlayElement.removeEventListener(\"click\", this.overlayClickEventListener, true);\n        }\n        overlayElement.remove();\n    }\n}\n\nexport default Modal;\n","import { document } from \"global\";\nimport { styleObjectToString } from \"../common/utils\";\nimport { MODAL_OVERLAY_CLASS, DEFAULT_MODAL_BORDER_RADIUS } from \"../common/constants\";\nimport renderProgressBar from \"../common/progressBar\";\nimport renderCloseXButton from \"../common/closeXButton\";\n\nconst createModal = ({ uid, index, closeButton = {} }): void => {\n    const modalOverlay = document.createElement(\"div\");\n    const modal = document.createElement(\"div\");\n    modal.id = uid;\n    modalOverlay.classList.add(MODAL_OVERLAY_CLASS);\n\n    const modalStyleProps = {};\n    const modalOverlayStyleProps = {};\n    const defaultBodyContent = `\n    <style>\n    .modal .body-content {\n      max-height: 500px;\n      width: 600px;\n      display: flex;\n      flex-direction: column;\n    }\n    h2{\n      font-weight: bold;\n      font-size: 1.5rem;\n    }\n    .button-area{\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin: 2rem 0;\n    }\n    </style>\n    <h2>Default Modal Content</h2>\n    <div class=\"button-area\">\n      <button class=\"button\" onclick=\"Lusift.next()\">\n        Next\n      </button>\n    </div>`;\n\n    modalOverlay.style.cssText = styleObjectToString({\n        position: \"absolute\",\n        background: \"#444\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        opacity: \"0.5\",\n        top: \"0\",\n        left: \"0\",\n        bottom: \"0\",\n        right: \"0\",\n        zIndex: \"99998\",\n        ...modalOverlayStyleProps,\n    });\n\n    modal.style.cssText = styleObjectToString({\n        borderRadius: DEFAULT_MODAL_BORDER_RADIUS,\n        ...modalStyleProps,\n    });\n    modal.classList.add(\"modal\");\n\n    modal.innerHTML = `\n    ${renderProgressBar()}\n    ${renderCloseXButton(closeButton, \"modal\")}\n    <section class=\"body-content\">\n    </section>\n  `;\n    const lusiftWrapper = document.createElement(\"div\");\n    lusiftWrapper.classList.add(\"lusift\");\n    lusiftWrapper.appendChild(modal);\n\n    document.body.appendChild(modalOverlay);\n    document.body.appendChild(lusiftWrapper);\n\n    const Lusift = window[\"Lusift\"];\n\n    const bodyContent =\n        Lusift.content[Lusift.activeGuide.id].data.steps[index].data.bodyContent ||\n        defaultBodyContent;\n\n    Lusift.render(bodyContent, \".lusift > .modal > .body-content\");\n};\n\nexport default createModal;\n","import styleObjectToString from \"../common/utils/styleObjectToString\";\nimport createTooltip from \"../common/createTooltip\";\nimport renderProgressBar from \"../common/progressBar\";\nimport { DEFAULT_TOOLTIP_BORDER_RADIUS } from \"../common/constants\";\n\nconst defaultBodyContent = `\n  <h3 style=\"font-weight: bold;\">Default title</h3>\n  <p style=\"font-weight: normal;\">Default tooltip content</p>\n`;\n\nconst renderTooltip = async ({ remove, data, target, styleProps, uid, index, onClickOutside }) => {\n    const {\n        arrow,\n        placement,\n        offset,\n        // bodyContent = defaultBodyContent,\n    } = data;\n\n    const content = `\n    <style>\n      .tippy-box{\n        z-index: 999999;\n        border-radius: ${DEFAULT_TOOLTIP_BORDER_RADIUS};\n        ${styleObjectToString(styleProps)}\n      }\n    </style>\n\n    ${renderProgressBar()}\n    <div class=\"lusift\">\n      <div class=\"hotspot-tooltip\" id=\"tooltip-${uid}\">\n        <section class=\"body-content\">\n        </section>\n      </div>\n    </div>\n  `;\n\n    const tooltipInstance = await createTooltip({\n        target,\n        content,\n        arrow,\n        offset,\n        placement,\n        onClickOutside,\n        remove: () => {},\n    });\n\n    const Lusift = window[\"Lusift\"];\n\n    const bodyContent =\n        Lusift.content[Lusift.activeGuide.id].data.steps[index].tip.data.bodyContent ||\n        defaultBodyContent;\n\n    Lusift.render(bodyContent, \".lusift > .hotspot-tooltip > .body-content\", () => {\n        tooltipInstance.update();\n    });\n\n    return tooltipInstance;\n};\n\nexport default renderTooltip;\n","import { document, window } from \"global\";\nimport createHotspotTooltip from \"./createHotspotTooltip\";\nimport createBeacon from \"./createBeacon\";\nimport {\n    getElementPosition,\n    getStepUID,\n    changeAsyncStepStatus,\n    onElementResize,\n} from \"../common/utils\";\nimport { Hotspot as HotspotData } from \"../common/types\";\nimport { log, warn, error } from \"../common/logger\";\n\n// TODO_: In case of customizing hotspot's beacon, we can just have a beaconElement property\n// TODO: Should the beacon animation stop when tip is open?\nclass Hotspot {\n    private tipID: string;\n    private fuitInstance: any;\n    private targetElement: HTMLElement;\n    readonly data: HotspotData;\n    private beaconID: string;\n    private resizeObservers: any[] = [];\n\n    constructor({ data, guideID }) {\n        log(data);\n        this.data = data;\n        const { index, type, target } = data;\n        this.tipID = getStepUID({ guideID, type, index });\n        this.beaconID = getStepUID({\n            guideID,\n            type: \"beacon\",\n            index,\n        });\n        this.targetElement = document.querySelector(target.elementSelector);\n        this.addBeacon();\n\n        // reposition beacon on body and targetElement resize\n        this.resizeObservers.push(onElementResize(document.body, this.repositionBeacon.bind(this)));\n        this.resizeObservers.push(\n            onElementResize(this.targetElement, this.repositionBeacon.bind(this)),\n        );\n    }\n\n    private repositionBeacon(): void {\n        this.remove();\n        this.fuitInstance = null;\n        this.addBeacon();\n        log(\"reset beacon position\");\n    }\n\n    private addBeacon(): void {\n        log(\"adding beacon\");\n        let {\n            top: targetTop,\n            left: targetLeft,\n            width: targetWidth,\n            height: targetHeight,\n        } = getElementPosition(this.targetElement);\n        const targetPosition = {\n            targetTop,\n            targetLeft,\n            targetWidth,\n            targetHeight,\n        };\n\n        const beaconData = this.data.beacon;\n\n        createBeacon({\n            targetPosition,\n            beaconData,\n            beaconID: this.beaconID,\n            toggleTooltip: this.toggleTooltip.bind(this),\n        });\n    }\n\n    private async toggleTooltip() {\n        // log('toggle tooltip');\n\n        const target = document.getElementById(this.beaconID);\n        const { data, styleProps } = this.data.tip;\n        const activeHotspot = window.Lusift.activeHotspot;\n        const Lusift = window[\"Lusift\"];\n\n        if (activeHotspot && this.data.index !== activeHotspot.data.index) {\n            Lusift.activeHotspot.hideTooltip();\n        }\n\n        // do not allow async step to close in dev mode\n        const isDevMode = !Boolean(Lusift.activeGuide);\n        let removeMethod = isDevMode ? Lusift.close : this.removeAndCloseAsync.bind(this);\n\n        if (!this.fuitInstance) {\n            // if it was never initiated\n            this.fuitInstance = await createHotspotTooltip({\n                remove: removeMethod,\n                uid: this.tipID,\n                index: this.data.index,\n                target,\n                styleProps,\n                data,\n                onClickOutside: (instance, event) => {\n                    removeMethod();\n                }\n            });\n            Lusift.activeHotspot = this;\n        } else if (this.fuitInstance.getState().isRemoved) {\n            error(\"Uh... but it doesn't exist. unexpected\");\n            // if it's removed\n        } else if (this.fuitInstance.getState().isShown) {\n            await this.hideTooltip();\n        } else if (this.fuitInstance) {\n            // if it's hidden\n            await this.fuitInstance.show();\n            Lusift.activeHotspot = this;\n        }\n    }\n\n    // TODO: refactor names, here it could be hideTip()\n    public async hideTooltip() {\n        await this.fuitInstance.hide();\n        window.Lusift.activeHotspot = null;\n    }\n\n    private changeAsyncStepStatus(toOpen: boolean): void {\n        if (!this.data.async) return;\n        changeAsyncStepStatus(this.data.index, toOpen);\n    }\n\n    private remove(): void {\n        log(`Removing id: ${this.data.index} hotspot`);\n        if (this.fuitInstance) {\n            if (this.fuitInstance.getState().isRemoved) {\n                log(\"Hotspot's tooltip is already destroyed\");\n            }\n            this.fuitInstance.remove();\n        } else {\n            log(\"Hotspot closed without ever opening\");\n        }\n        const beaconElement = document.getElementById(this.beaconID);\n        if (beaconElement) {\n            beaconElement.parentElement.remove();\n            window.Lusift.activeHotspot = null;\n        }\n    }\n\n    private removeResizeObservers(): void {\n        this.resizeObservers.forEach(ro => ro.disconnect());\n    }\n\n    private removeAndCloseAsync(): void {\n        this.remove();\n        this.changeAsyncStepStatus(false);\n        this.removeResizeObservers();\n    }\n}\n\nexport default Hotspot;\n","import { document, window } from \"global\";\nimport { styleObjectToString, getElementPosition } from \"../common/utils\";\nimport { BEACON_CONTAINER_CLASS } from \"../common/constants\";\n\nconst createBeacon = ({ targetPosition, beaconData, beaconID, toggleTooltip }) => {\n    const { targetTop, targetLeft, targetHeight, targetWidth } = targetPosition;\n\n    const beaconContainer = document.createElement(\"div\");\n    beaconContainer.style.cssText = styleObjectToString({\n        position: \"absolute\",\n        top: `${targetTop}px`,\n        left: `${targetLeft}px`,\n    });\n    beaconContainer.classList.add(BEACON_CONTAINER_CLASS);\n\n    let { placement, size, color, type } = beaconData;\n    const { top, left } = placement;\n    const animation = true;\n\n    beaconContainer.innerHTML = `\n  <style>\n    #${beaconID} {\n      background-color: ${color || \"#b9f\"};\n      border-radius: 50%;\n      position: absolute;\n      pointer-events: auto;\n      width: ${size * 13}px;\n      height: ${size * 13}px;\n\n      ${\n          animation\n              ? `\n      -webkit-animation: shine 2s ease-in-out infinite;\n      animation: shine 2s ease-in-out infinite;\n        `\n              : \"\"\n      }\n      cursor: pointer;\n      -webkit-animation-delay: 1s;\n      animation-delay: 1s;\n      top: ${(top / 100) * targetHeight}px;\n      left: ${(left / 100) * targetWidth}px;\n    }\n\n\n    @-webkit-keyframes shine {\n      0%, 20% {\n        box-shadow: 0px 0px 0px 0px rgba(187, 153, 255, 0.49);\n      }\n      100% {\n        box-shadow: 0px 0px 0px ${20 * size}px rgba(0, 0, 0, 0);\n      }\n    }\n\n    @keyframes shine {\n      0%, 20% {\n        box-shadow: 0px 0px 0px 0px rgba(187, 153, 255, 0.49);\n      }\n      100% {\n        box-shadow: 0px 0px 0px ${20 * size}px rgba(0, 0, 0, 0);\n      }\n    }\n  }\n  </style>\n  <div class=\"lusift-beacon\" id=\"${beaconID}\"></div>\n`;\n\n    document.body.appendChild(beaconContainer);\n    const beaconElement = document.getElementById(beaconID);\n\n    const beaconEventReceiver = document.createElement(\"div\");\n    beaconEventReceiver.id = `${beaconID}-er`;\n    const { width, height } = getElementPosition(beaconElement);\n\n    beaconEventReceiver.style.cssText = styleObjectToString({\n        ...beaconElement.style,\n        width: `${width}px`,\n        height: `${height}px`,\n        background: \"transparent\",\n        zIndex: \"394490\",\n    });\n    beaconElement.appendChild(beaconEventReceiver);\n\n    beaconEventReceiver.addEventListener(\"click\", toggleTooltip);\n};\n\nexport default createBeacon;\n","import Tooltip from \"../../tooltip\";\nimport Modal from \"../../modal\";\nimport Hotspot from \"../../hotspot\";\n\nconst startStepInstance = (stepData: any, guideID: string): void => {\n    const { index, target, type, data, closeButton } = stepData;\n    let activeStepInstance: any;\n\n    if (type === \"tooltip\") {\n        const { actions, styleProps } = stepData;\n\n        activeStepInstance = new Tooltip({\n            target,\n            data,\n            index,\n            guideID,\n            actions,\n            styleProps,\n        });\n    } else if (type === \"modal\") {\n        activeStepInstance = new Modal({\n            index,\n            guideID,\n            data,\n            closeButton,\n        });\n    } else if (type === \"hotspot\") {\n        activeStepInstance = new Hotspot({\n            data: stepData,\n            guideID,\n        });\n    }\n    return activeStepInstance;\n};\n\nexport default startStepInstance;\n","/*!\n* tabbable 5.2.1\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    var _node$getBoundingClie = node.getBoundingClientRect(),\n        width = _node$getBoundingClie.width,\n        height = _node$getBoundingClie.height;\n\n    return width === 0 && height === 0;\n  }\n\n  return false;\n}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\n\n\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (isInput(node) || node.tagName === 'SELECT' || node.tagName === 'TEXTAREA' || node.tagName === 'BUTTON') {\n    var parentNode = node.parentElement;\n\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> as an immediate child of the disabled\n        //  <fieldset>: if the node is in that legend, it'll be enabled even\n        //  though the fieldset is disabled; otherwise, the node is in a\n        //  secondary/subsequent legend, or somewhere else within the fieldset\n        //  (however deep nested) and it'll be disabled\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i);\n\n          if (child.tagName === 'LEGEND') {\n            if (child.contains(node)) {\n              return false;\n            } // the node isn't in the first legend (in doc order), so no matter\n            //  where it is now, it'll be disabled\n\n\n            return true;\n          }\n        } // the node isn't in a legend, so no matter where it is now, it'll be disabled\n\n\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  } // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options.displayCheck) || // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (!isNodeMatchingSelectorFocusable(options, node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n* focus-trap 6.7.1\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar getActualTarget = function getActualTarget(event) {\n  // NOTE: If the trap is _inside_ a shadow DOM, event.target will always be the\n  //  shadow host. However, event.target.composedPath() will be an array of\n  //  nodes \"clicked\" from inner-most (the actual element inside the shadow) to\n  //  outer-most (the host HTML document). If we have access to composedPath(),\n  //  then use its first element; otherwise, fall back to event.target (and\n  //  this only works for an _open_ shadow DOM; otherwise,\n  //  composedPath()[0] === event.target always).\n  return event.target.shadowRoot && typeof event.composedPath === 'function' ? event.composedPath()[0] : event.target;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = (userOptions === null || userOptions === void 0 ? void 0 : userOptions.document) || document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n    // timer ID for when delayInitialFocus is true and initial focus in this trap\n    //  has been delayed during activation\n    delayInitialFocusTimer: undefined\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {\n    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];\n  };\n\n  var containersContain = function containersContain(element) {\n    return !!(element && state.containers.some(function (container) {\n      return container.contains(element);\n    }));\n  };\n  /**\n   * Gets the node for the given option, which is expected to be an option that\n   *  can be either a DOM node, a string that is a selector to get a node, `false`\n   *  (if a node is explicitly NOT given), or a function that returns any of these\n   *  values.\n   * @param {string} optionName\n   * @returns {undefined | false | HTMLElement | SVGElement} Returns\n   *  `undefined` if the option is not specified; `false` if the option\n   *  resolved to `false` (node explicitly not given); otherwise, the resolved\n   *  DOM node.\n   * @throws {Error} If the option is set, not `false`, and is not, or does not\n   *  resolve to a node.\n   */\n\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (typeof optionValue === 'function') {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        params[_key2 - 1] = arguments[_key2];\n      }\n\n      optionValue = optionValue.apply(void 0, params);\n    }\n\n    if (!optionValue) {\n      if (optionValue === undefined || optionValue === false) {\n        return optionValue;\n      } // else, empty string (invalid), null (invalid), 0 (invalid)\n\n\n      throw new Error(\"`\".concat(optionName, \"` was specified but was not a node, or did not return a node\"));\n    }\n\n    var node = optionValue; // could be HTMLElement, SVGElement, or non-empty string at this point\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue); // resolve to node, or null if fails\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` as selector refers to no known node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node = getNodeForOption('initialFocus'); // false explicitly indicates we want no initialFocus at all\n\n    if (node === false) {\n      return false;\n    }\n\n    if (node === undefined) {\n      // option not specified: use fallback options\n      if (containersContain(doc.activeElement)) {\n        node = doc.activeElement;\n      } else {\n        var firstTabbableGroup = state.tabbableGroups[0];\n        var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode; // NOTE: `fallbackFocus` option function cannot return `false` (not supported)\n\n        node = firstTabbableNode || getNodeForOption('fallbackFocus');\n      }\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus') // returning false not supported for this option\n    ) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === false) {\n      return;\n    }\n\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus', previousActiveElement);\n    return node ? node : node === false ? false : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var target = getActualTarget(e);\n    var targetContained = containersContain(target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    var target = getActualTarget(e);\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(target);\n      });\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        // is the target the first tabbable node in a group?\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        // is the target the last tabbable node in a group?\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      // NOTE: the fallbackFocus option does not support returning false to opt-out\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    } // else, let the browser take care of [shift+]tab and move the focus\n\n  };\n\n  var checkKey = function checkKey(e) {\n    if (isEscapeEvent(e) && valueOrHandler(config.escapeDeactivates, e) !== false) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    state.delayInitialFocusTimer = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      var onActivate = getOption(activateOptions, 'onActivate');\n      var onPostActivate = getOption(activateOptions, 'onPostActivate');\n      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      var finishActivation = function finishActivation() {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n\n        addListeners();\n\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(state.delayInitialFocusTimer); // noop if undefined\n\n      state.delayInitialFocusTimer = undefined;\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      var onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      var checkCanReturnFocus = getOption(deactivateOptions, 'checkCanReturnFocus');\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = getOption(deactivateOptions, 'returnFocus', 'returnFocusOnDeactivate');\n\n      var finishDeactivation = function finishDeactivation() {\n        delay(function () {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","import * as focusTrap from \"focus-trap\";\nimport { window } from \"global\";\n\nconst addFocusTrap = ({ target, escToClose, clickOutsideToClose }): any => {\n    const isDevMode = !window.Lusift.activeGuideID;\n\n    const ft = focusTrap.createFocusTrap(target, {\n        initialFocus: false,\n        escapeDeactivates: !isDevMode && escToClose,\n        clickOutsideDeactivates: !isDevMode && clickOutsideToClose,\n    });\n    ft.activate();\n    return ft;\n};\n\nexport default addFocusTrap;\n","import { window } from \"global\";\nimport { saveState, loadState } from \"../common/store\";\nimport { log, warn, error } from \"../common/logger\";\nimport {\n    changeAsyncStepStatus,\n    startStepInstance,\n    doesStepMatchDisplayCriteria,\n} from \"../common/utils\";\n\nimport { GuideType, TrackingState, StepTargetType } from \"../common/types\";\n\nexport default class Guide {\n    readonly guideData: GuideType;\n    private activeSteps: {\n        index: number;\n        instance: any;\n        target: StepTargetType;\n        type: string;\n        async: boolean;\n    }[] = [];\n    // ^For limited use only, doesn't update after a step is closed\n    // TODO: make this update after a step is closed\n\n    constructor(guideID: string) {\n        // localGuideState consists of trackingState and guideData\n        log(\"guide constructor\");\n        log(loadState());\n        const localGuideState = loadState()[guideID];\n        const guideData = Object.assign({}, localGuideState);\n        delete guideData.trackingState;\n\n        this.guideData = guideData;\n        log(\n            `%c Welcome to guide: ${this.guideData.name || this.guideData.id}`,\n            \"background: #222; color: #bada55\",\n        );\n\n        if (!localGuideState.trackingState) {\n            const newTrackingState = this.generateNewTrackingState();\n            this.setTrackingState(newTrackingState);\n        }\n    }\n\n    private generateNewTrackingState(): TrackingState {\n        let newTrackingState = {\n            currentStepIndex: 0,\n            finished: false,\n            prematurelyClosed: false,\n            asyncSteps: {},\n            enabled: false,\n        };\n\n        //for async steps\n        this.guideData.steps.forEach(step => {\n            if (\"async\" in step) {\n                if (step.async && step.type === \"hotspot\") {\n                    newTrackingState.asyncSteps[step.index] = {\n                        toOpen: false,\n                    };\n                }\n            }\n        });\n        return newTrackingState;\n    }\n\n    public start(): void {\n        const { finished, prematurelyClosed } = this.getTrackingState();\n        this.removeIllegalSteps();\n        this.attemptToStartAsyncSteps();\n\n        if (finished || prematurelyClosed) {\n            error(\"Guide is already finished or closed\");\n        } else {\n            this.attemptToShowActiveStep();\n        }\n    }\n\n    private removeAllActiveSteps(): void {\n        this.activeSteps.forEach(stepInstance => {\n            // instance.reRenderPageElements();\n            const { type, target, instance, async } = stepInstance;\n            if (async && type === \"hotspot\") {\n                instance.removeResizeObservers();\n            }\n            instance.remove();\n        });\n        this.activeSteps = [];\n    }\n\n    public reRenderStepElements(): void {\n        log(\"re-render step elements\");\n        this.removeAllActiveSteps();\n        this.start();\n    }\n\n    private attemptToShowActiveStep(): void {\n        // we start with some currentStep from this.trackingState\n        // if the step is async, set toOpen to true\n        //-- if display criteria matches and step isn't already displayed, then startStep\n        // if the step is async, loop back with stepIndex++\n        const { currentStepIndex } = this.getTrackingState();\n        let stepIndex = currentStepIndex;\n        const steps = this.guideData.steps;\n        let isAsyncStep: boolean;\n\n        stepIndex--;\n        do {\n            stepIndex++;\n            const step = steps[stepIndex];\n            const { target, type } = steps[stepIndex];\n            let async = false;\n            if (\"async\" in step) {\n                async = step.async!;\n            }\n            const displayCriteriaMatches = doesStepMatchDisplayCriteria({\n                target,\n                type,\n            });\n            isAsyncStep = async && type === \"hotspot\";\n\n            if (isAsyncStep) {\n                changeAsyncStepStatus(stepIndex, true);\n            }\n            if (displayCriteriaMatches && !this.isStepAlreadyActive(stepIndex)) {\n                this.activeSteps.push({\n                    index: stepIndex,\n                    instance: startStepInstance(steps[stepIndex], this.guideData.id),\n                    target,\n                    type,\n                    async,\n                });\n            }\n        } while (isAsyncStep);\n\n        let newTrackingState = this.getTrackingState();\n        newTrackingState.currentStepIndex = stepIndex;\n        this.setTrackingState(newTrackingState);\n    }\n\n    private isStepAlreadyActive(stepIndex: number): boolean {\n        return this.activeSteps.some(({ index }) => index === stepIndex);\n    }\n\n    private attemptToStartAsyncSteps(): void {\n        // start all the async hotpots with toOpen true\n        const steps = this.guideData.steps;\n        steps.forEach(step => {\n            const { type, index, target } = step;\n            let async = false;\n            if (\"async\" in step) {\n                async = step.async!;\n            }\n            if (async && type === \"hotspot\") {\n                if (\n                    doesStepMatchDisplayCriteria({ target, type }) &&\n                    this.getTrackingState().asyncSteps[index].toOpen\n                ) {\n                    log(`Step ${index}: target path and element matched. toOpen is true`);\n                    // if step is already active warn that the step is already active\n                    if (this.isStepAlreadyActive(index)) {\n                        return warn(`Step ${index} is already active`);\n                    }\n                    this.activeSteps.push({\n                        index,\n                        instance: startStepInstance(steps[index], this.guideData.id),\n                        target,\n                        type,\n                        async,\n                    });\n                }\n            }\n        });\n    }\n\n    private removeIllegalSteps(): void {\n        this.activeSteps = this.activeSteps.filter(stepInstance => {\n            // if step display criteria doesn't match, then run remove() and remove from this.activeSteps\n            const { type, target, instance, async } = stepInstance;\n            if (!doesStepMatchDisplayCriteria({ target, type })) {\n                if (async && type === \"hotspot\") {\n                    instance.removeResizeObservers();\n                }\n                instance.remove();\n                return false;\n            } else {\n                return true;\n            }\n        });\n    }\n\n    private setTrackingState(trackingState: TrackingState | undefined): void {\n        const existingState = loadState();\n        saveState({\n            ...existingState,\n            [this.guideData.id]: {\n                ...existingState[this.guideData.id],\n                trackingState,\n            },\n        });\n    }\n\n    public getTrackingState(): TrackingState {\n        return loadState()[this.guideData.id].trackingState;\n    }\n\n    private clearTrackingState(): void {\n        this.setTrackingState(undefined);\n    }\n\n    public setStep(newStepNum: number): void {\n        // change step and see which steps need to be unmounted or mounted\n        let newTrackingState = this.getTrackingState();\n        if (newStepNum < 0) {\n            return warn(\"Step index can't be less than 0\");\n        } else if (newStepNum + 1 > this.guideData.steps.length) {\n            newTrackingState.finished = true;\n            this.setTrackingState(newTrackingState);\n            log(\"guide finished\");\n        } else {\n            newTrackingState.currentStepIndex = newStepNum;\n            this.setTrackingState(newTrackingState);\n            this.start();\n        }\n    }\n\n    private close(): void {\n        // close guide\n        // if current step is last step then finished=true, else prematurelyClosed=true\n        let newTrackingState = this.getTrackingState();\n        if (newTrackingState.currentStepIndex + 1 === this.guideData.steps.length) {\n            newTrackingState.finished = true;\n        } else {\n            newTrackingState.prematurelyClosed = true;\n        }\n        this.setTrackingState(newTrackingState);\n        this.removeAllActiveSteps();\n        window.Lusift.activeGuide = null;\n        log(\"guide closed\");\n        typeof window.Lusift.onClose === \"function\" && window.Lusift.onClose();\n        window.Lusift.disable(this.guideData.id);\n    }\n\n    private closeCurrentStep(): void {\n        // if this.trackingState.activeStep is equal to any index of item from this.activeSteps, then log('hello')\n        const { currentStepIndex } = this.getTrackingState();\n        const currentStep = this.activeSteps.find(({ index }) => index === currentStepIndex);\n\n        if (currentStep) {\n            currentStep.instance.remove();\n            this.activeSteps = this.activeSteps.filter(\n                instance => instance.index !== currentStepIndex,\n            );\n        } else {\n            warn(\"There's no active step to close\");\n        }\n    }\n\n    private nextStep(): void {\n        const newStep = this.getTrackingState().currentStepIndex + 1;\n        if (newStep + 1 > this.guideData.steps.length) {\n            return error(\"No new steps\");\n        }\n        this.closeCurrentStep();\n        this.setStep(newStep);\n        typeof window.Lusift.onNext === \"function\" && window.Lusift.onNext();\n    }\n\n    private prevStep(): void {\n        // make newStep the index of the closest previus step with !step.async\n        let newStep = this.getTrackingState().currentStepIndex;\n\n        while (newStep > -2) {\n            newStep--;\n            const step = this.guideData.steps[newStep];\n            if (!step) {\n                break;\n            }\n            let async = false;\n            if (\"async\" in step) {\n                async = step.async!;\n            }\n            let stepIsAsync = step.type === \"hotspot\" && async;\n            if (!stepIsAsync) {\n                break;\n            }\n        }\n        if (newStep < 0) return error(\"No previous steps\");\n        this.closeCurrentStep();\n        this.setStep(newStep);\n        const Lusift = window[\"Lusift\"];\n        typeof Lusift.onPrev === \"function\" && Lusift.onPrev();\n    }\n}\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","import Guide from \"./Guide\";\nimport { saveState, loadState } from \"../common/store\";\nimport { log, error, warn } from \"../common/logger\";\nimport isEqual from \"lodash.isequal\";\nimport { doesStepMatchDisplayCriteria, startStepInstance } from \"../common/utils\";\n\nimport { window, document } from \"global\";\n\nimport { GuideType, Content, TrackingState } from \"../common/types\";\n\nimport { isOfTypeContent, isObject } from \"../common/utils/isOfType\";\n\nimport addDefaultCSS from \"./addDefaultCSS\";\n\n// TODO: Write documentation\n\n// TODO: decide on making configuring easier, with inheritence, global levels, etc.\n// -- Maybe don't have setContent take everything, seperate concerns. makes documenting easier too\n// NOTE_: Support for different typescript versions\n// TODO_: add support for angul*r\n// TODO: Buggy when the target for tooltip is sidebar link\n// TODO: Add option to be able to set where the progress bar should be relative to the 2 axis or the arrow\n// TODO: Tooltip positioning for different screen sizes\n// TODO: what's that thick layer thing beneath tippy tooltip content? zoom in with ctrl+\n// -- how do the comercial saas handle it? automatically or end-user config?\n// -- have the options for orientation be `auto` and `fixed` with positions being the different axis relative to\n// the target. With auto, the position is only picked when there is space for the tooltip, else it moves to different position\n// NOTE: Handling versioning\n// NOTE: resize observer doesn't work with svg elements\n// TODO: rename filenames\n// TODO: Performance concerns of the host app in rendering all this stuff?\n// -- https://web.archive.org/web/20210827084020/https://atfzl.com/don-t-attach-tooltips-to-document-body\n// TODO: Can we just export element classes (Tooltip, Modal, Hotspot, Backdrop) and have them be optionally loadable by the client?\n// -- something like how modifiers work in popperjs\n// TODO: Look into more lightweight solutions for tippyjs/popperjs (nanopop)\n// -- offset\n// -- animations\n// -- auto placement\n// -- prevent overflow from containing area, set margin from the boundaries too\n// -- arrow that can move relative to the tooltip, i.e., not necessarily at the center (& padding from the corners of the edges)\n// -- hold dom element\n\nconst noOp = () => {}; // no-op function\n\nclass Lusift {\n    private content: Content | undefined;\n    public render: Function = noOp;\n    public activeGuide: {\n        instance: any;\n        id: string;\n    } | null = null;\n    public progress: number = 0;\n\n    private next: Function = noOp;\n    private prev: Function = noOp;\n    private close: Function = noOp;\n    private goto: Function = noOp;\n    private onNext: Function | undefined;\n    private onPrev: Function | undefined;\n    private onClose: Function | undefined;\n\n    constructor() {\n        log(\"%c Lusift constructor! \", \"background: #222; color: #bada55\");\n\n        const localData = loadState();\n        // if loadState() type is not object,\n        if (!isObject(localData)) {\n            saveState({});\n        }\n        addDefaultCSS();\n        /* if (typeof document !== \"undefined\") {\n            window['updateTooltip'] = updateTooltip;\n            createTooltip();\n        } */\n    }\n\n    private showEnabledContent(): void {\n        const localData = loadState();\n        const enabledGuideID = Object.keys(localData).find(key => {\n            const { trackingState } = localData[key];\n            if(trackingState){\n                return trackingState.enabled\n            }\n            return false;\n        });\n        if (enabledGuideID) {\n            this.showContent(enabledGuideID);\n        }\n    }\n\n    public enable(guideID: string): void {\n        let localData = loadState();\n        if(!Object.keys(localData).some(key => key === guideID)) {\n            return error(`Content of id '${guideID}' doesn't exist`);\n        }\n\n        Object.keys(localData).forEach(key => {\n            const { trackingState } = localData[key];\n            if(trackingState){\n                localData[key].trackingState.enabled = key === guideID;\n            }\n        });\n        saveState(localData);\n        this.showContent(guideID);\n    }\n\n    public disable(guideID: string): void {\n        let localData = loadState();\n        if(!Object.keys(localData).some(key => key === guideID)) {\n            return error(`Content of id '${guideID}' doesn't exist`);\n        }\n        localData[guideID].trackingState.enabled = false;\n        saveState(localData);\n    }\n\n    private hasGuideDataChanged(guideData: GuideType): boolean {\n        const localData = loadState();\n        if (!localData[guideData.id]) return true;\n        const localGuideData = localData[guideData.id];\n        delete localGuideData.trackingState;\n        const guideDataWithoutHooks = { ...guideData };\n        delete guideDataWithoutHooks.onNext;\n        delete guideDataWithoutHooks.onClose;\n        delete guideDataWithoutHooks.onPrev;\n        return !isEqual(localGuideData, guideDataWithoutHooks);\n    }\n\n    private reconcileContentWithLocalState(): void {\n        // Look through each content item,\n        // --clear tracking data if item data has changed, and if doNotResetTrackerOnContentChange is false\n        // --conserve otherwise\n        let stateToSave = {};\n        let contentWithoutBodyContent = JSON.parse(JSON.stringify(this.content));\n\n        Object.keys(this.content!).forEach(key => {\n            const {\n                id,\n                name = \"\",\n                description = \"\",\n                steps,\n                onNext,\n                onPrev,\n                onClose,\n                doNotResetTrackerOnContentChange = false,\n            } = contentWithoutBodyContent[key].data;\n\n            // remove bodyContent from steps\n            let stepsWithoutBodyContent = steps.map(step => {\n                if (step.type === \"tooltip\" || step.type === \"modal\") {\n                    delete step.data.bodyContent;\n                } else if (step.type === \"hotspot\") {\n                    delete step.tip.data.bodyContent;\n                }\n                return step;\n            });\n\n            contentWithoutBodyContent[key].data = {\n                id,\n                name,\n                description,\n                steps: stepsWithoutBodyContent,\n                onNext,\n                onPrev,\n                onClose,\n                doNotResetTrackerOnContentChange,\n            };\n        });\n\n        Object.keys(contentWithoutBodyContent).forEach(key => {\n            if (contentWithoutBodyContent[key].type === \"guide\") {\n                const guideData = contentWithoutBodyContent[key].data; //prolly a guide\n                if (\n                    this.hasGuideDataChanged(guideData) &&\n                    !guideData.doNotResetTrackerOnContentChange\n                ) {\n                    log(`guide with id '${key}' changed, tracking state reset.`);\n                    // clear tracking data\n                    stateToSave[guideData.id] = guideData;\n                } else {\n                    const localGuideData = loadState()[guideData.id];\n                    stateToSave[guideData.id] = localGuideData;\n                }\n            }\n        });\n        saveState(stateToSave);\n    }\n\n    public setContent(content: Content): void {\n        // filter and validate content\n        if (!isOfTypeContent(content)) {\n            return error(\"Content data type is invalid\");\n        }\n\n        // retrieve approriate properties from received content\n        this.content = content;\n        Object.keys(content).forEach(key => {\n            const {\n                id,\n                name = \"\",\n                description = \"\",\n                steps,\n                onNext,\n                onPrev,\n                onClose,\n                doNotResetTrackerOnContentChange = false,\n            } = content[key].data;\n\n            this.content![key].data = {\n                id,\n                name,\n                description,\n                steps,\n                onNext,\n                onPrev,\n                onClose,\n                doNotResetTrackerOnContentChange,\n            };\n        });\n\n        let dataOfActiveGuideChanged: boolean;\n        let contentIDExists: boolean;\n\n        if (this.activeGuide) {\n            dataOfActiveGuideChanged = this.hasGuideDataChanged(\n                this.content[this.activeGuide.id].data,\n            );\n            contentIDExists = Object.keys(this.content).includes(this.activeGuide.id);\n        }\n\n        // iterate through each content item to note changes and conditionally preserve trackingState\n        // and then save to localStorage\n        this.reconcileContentWithLocalState();\n        //content has been set to local\n\n        // for any already active guide\n        if (this.activeGuide) {\n            // if the contentID doesn't exist at all in the new content received, or\n            // if contentID exists but data has changed\n            if (!contentIDExists! || (contentIDExists && dataOfActiveGuideChanged!)) {\n                this.activeGuide.instance.removeAllActiveSteps();\n                this.activeGuide = null;\n            }\n        }\n    }\n\n    public clearContent(): void {\n        saveState({});\n        this.content = {};\n    }\n\n    public refresh(): void {\n        // run page elements through step display conditionals again\n        if (this.activeGuide) {\n            window.setTimeout(() => {\n                this.activeGuide!.instance.start();\n                log(\"Lusift refreshed\");\n                // log('%c page refresh ', 'background: #222; color: #bada55');\n            }, 0);\n        } else {\n            warn(\"No active guide instance to refresh\");\n            // Assuming this method is called every time on page load.\n            // Better than running in constructor which runs on import of Lusift\n            this.showEnabledContent();\n        }\n    }\n\n    public showContent<T extends string>(contentID: T extends \"\" ? never : T): void {\n        // Forces specific Lusift content to appear for the current user by passing in the ID.\n        if (!this.content) {\n            return error(`Content not set, pass valid content data to setContent()`);\n        }\n        // see if content exists for contentID\n        if (!this.content[contentID]) {\n            return error(`Content with id of ${contentID} doesn't exist`);\n        }\n        // when there's an active guide\n        if (this.activeGuide) {\n            const { instance, id } = this.activeGuide;\n\n            if (id === contentID) {\n                this.activeGuide.instance.reRenderStepElements();\n                return error(`${contentID} is already active`);\n            } else {\n                instance.close();\n            }\n        }\n\n        window.setTimeout(() => {\n            // HACK:\n            // There's a noticeable delay in react component appearing as bodyContent properties\n            // on page load, so we arbitrarily wait 500ms before running this section\n            const newGuideInstance = new Guide(contentID);\n            this.activeGuide = {\n                id: contentID,\n                instance: newGuideInstance,\n            };\n            newGuideInstance.start();\n            this.prepareHooks();\n        }, 500);\n    }\n\n    private prepareHooks(): void {\n        // attach active content's navigation methods to Lusift instance\n        const { instance: activeGuideInstance, id: activeGuideID } = this.activeGuide!;\n        this.next = activeGuideInstance.nextStep.bind(activeGuideInstance);\n        this.prev = activeGuideInstance.prevStep.bind(activeGuideInstance);\n        this.close = activeGuideInstance.close.bind(activeGuideInstance);\n        this.goto = activeGuideInstance.setStep.bind(activeGuideInstance);\n\n        const { onNext, onPrev, onClose } = this.content![activeGuideID].data;\n        this.onNext = onNext;\n        this.onPrev = onPrev;\n        this.onClose = onClose;\n    }\n\n    public setGlobalStyle(styleText: string): void {\n        if (typeof styleText !== \"string\") {\n            return error(\"Invalid style passed to setGlobalStyle()\");\n        }\n        let customStyle = document.querySelector(\"style[lusift-custom-css]\");\n        if (!customStyle) {\n            return error(`Style tag for custom-css not found. Report to Lusift\\'s github.`);\n        }\n        customStyle.textContent = styleText;\n    }\n\n    public getTrackingState(): TrackingState | null {\n        if (this.activeGuide) {\n            return loadState()[this.activeGuide.id].trackingState;\n        } else {\n            warn(\"No active guide\");\n            return null;\n        }\n    }\n\n    public devShowStep(guideID: string, stepNumber: number): void {\n        // dev mode: to be used to develop/style step elements\n        // if there is some other content active already, refuse to show dev mode\n        if (this.activeGuide) {\n            return warn(\n                `Can\\'t enable dev mode because a ` + `guide is active using showContent()`,\n            );\n        }\n        if (!this.content) {\n            return warn(\n                `Content not set, pass valid content object ` +\n                    `to setContent() before running devShowStep()`,\n            );\n        }\n        this.next =\n            this.prev =\n            this.close =\n            this.showContent =\n                function () {\n                    error(`Can't run this method in dev mode`);\n                };\n\n        if (this.content[guideID]) {\n            const { steps } = this.content[guideID].data;\n            const { target, type } = steps[stepNumber];\n\n            if (!doesStepMatchDisplayCriteria({ target, type })) {\n                return warn(\n                    `Display criteria for step do not match. Navigate to ` +\n                        `the right target page and make sure that the target ` +\n                        `element is in the visible screen, then reload page.`,\n                );\n            }\n\n            if (steps[stepNumber]) {\n                startStepInstance(steps[stepNumber], guideID);\n                log(\n                    `%c Showing step ${stepNumber} of ${guideID} in dev mode`,\n                    \"background: #222; color: #bada55\",\n                );\n            } else {\n                error(`Guide '${guideID}' doesn't have a step ${stepNumber}`);\n            }\n        } else {\n            error(`Guide with id '${guideID}' doesn't exist`);\n        }\n    }\n}\n\nexport default new Lusift();\n","import { window, document } from \"global\";\nimport lusiftDefaultCSS from \"./style/lusift.css\";\nimport {\n    PRIMARY_COLOR,\n    DEFAULT_MODAL_BORDER_RADIUS,\n    DEFAULT_TOOLTIP_BORDER_RADIUS,\n    DEFAULT_PROGRESS_BAR_HEIGHT,\n} from \"../common/constants\";\n\n// Inject default lusift global styles\n\nconst getDynamicDefaultCSS = () => {\n    // TODO: Have these properties be in lusift.css too\n    return `\\n\n    /* from dynamic javascript variables*/\n\n    .lusift-progress {\n      height: ${DEFAULT_PROGRESS_BAR_HEIGHT};\n    }\n    .lusift-progress::-webkit-progress-bar {\n      border-radius: ${DEFAULT_TOOLTIP_BORDER_RADIUS}; /*border-radius of tooltip*/\n    }\n    .modal .lusift-progress::-webkit-progress-bar {\n      border-radius: ${DEFAULT_MODAL_BORDER_RADIUS}; /*border-radius of modal*/\n    }\n    .lusift-progress::-webkit-progress-value {\n      background-color: ${PRIMARY_COLOR}; /*color of progress bar*/\n    }\n  `;\n};\n\nexport default () => {\n    if (typeof document === \"undefined\") return;\n\n    const lusiftDefault = document.createElement(\"style\");\n    lusiftDefault.type = \"text/css\";\n    lusiftDefault.setAttribute(\"lusift-default\", \"\");\n    lusiftDefault.textContent = lusiftDefaultCSS;\n    lusiftDefault.textContent += getDynamicDefaultCSS();\n\n    const lusiftCustom = document.createElement(\"style\");\n    lusiftCustom.type = \"text/css\";\n    lusiftCustom.setAttribute(\"lusift-custom\", \"\");\n\n    const customStyle = document.createElement(\"style\");\n    customStyle.type = \"text/css\";\n    customStyle.setAttribute(\"lusift-custom-css\", \"\");\n\n    const docFrag = document.createDocumentFragment();\n    // append all style elements to the document fragment\n    docFrag.appendChild(lusiftDefault);\n    docFrag.appendChild(lusiftCustom);\n    docFrag.appendChild(customStyle);\n    // append the document fragment to the document\n    document.head.appendChild(docFrag);\n};\n","import React from \"react\";\nimport Lusift from \"../../lusift\";\nimport { window, document } from \"global\";\nimport ReactDOM from \"react-dom\";\nimport { Content } from \"../../common/types\";\nimport { vanillaRender } from \"../../common/utils\";\nimport { isReactComponent, isReactClassComponent } from \"../../common/utils/isOfType\";\n\nconst reactRender = (BodyComponent: any, targetPath: string, callback?: Function) => {\n    const target = document.querySelector(targetPath);\n    ReactDOM.render(<BodyComponent />, target);\n    if (callback) callback();\n};\n\nconst renderBodyContent = (body: any, targetPath: string, callback?: Function): void => {\n    if (isReactComponent(body)) {\n        reactRender(body, targetPath, callback);\n    } else {\n        vanillaRender(body, targetPath, callback);\n    }\n};\n\nif (typeof window !== \"undefined\") {\n    window.addEventListener(\"error\", e => console.log(e), true);\n    Lusift.render = renderBodyContent;\n    window[\"Lusift\"] = Lusift;\n}\n\nexport { Lusift as default, Content as LusiftContent };\n","const vanillaRender = (elementToRender: string, targetPath: string, callback?: Function) => {\n    const target = document.querySelector(targetPath);\n    target!.innerHTML = elementToRender;\n    if (callback) callback();\n};\n\nexport default vanillaRender;\n"],"names":["window_1","window","global","self","log","console","warn","message","_i","args","messagePrefix","error","loadState","serialisedState","localStorage","getItem","JSON","parse","err","saveState","state","stringify","setItem","isObject","item","Object","constructor","isObjectOrUndefined","object","isOfTypeTooltipData","placements","forEach","p","push","arrow","offset","length","actions","includes","placement","contentBody","progressOn","backdrop","isOfTypeStep","index","type","elementSelectorExists","elementSelector","path","comparator","value","isOfTypeTarget","target","data","styleProps","isOfTypeTooltip","isOfTypeHotspot","closeButton","isOfTypeModal","isOfTypeContent","itemTypes","values","every","id","name","description","steps","hasOwnProperty","isOfTypeGuide","mergeObjects","obj1","obj2","assign","keys","key","e","styleObjectToString","stylesString","replace","m","toLowerCase","getStepUID","_a","guideID","MapShim","Map","getIndex","arr","result","some","entry","class_1","this","__entries__","defineProperty","prototype","get","enumerable","configurable","set","delete","entries","splice","has","clear","callback","ctx","call","isBrowser","document","global$1","Math","Function","requestAnimationFrame$1","requestAnimationFrame","bind","setTimeout","Date","now","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","indexOf","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","_b","propertyName","getInstance","instance_","defineConfigurable","props","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","arguments","reduce","size","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","positions_1","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","create","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","_this","observation","map","WeakMap","ResizeObserver","method","apply","onElementResize","element","resizeObserver","getElementPosition","body","scrollTop","pageYOffset","scrollLeft","pageXOffset","elementRect","getBoundingClientRect","changeAsyncStepStatus","stepIndex","toOpen","exisitingState","activeGuideID","Lusift","activeGuide","trackingState","asyncSteps","roundNum","decimalPlaces","Number","EPSILON","pow","doesStepPathMatch","targetPath","str","location","currentPath","endsWith","startsWith","RegExp","test","doesStepMatchesDisplayCriteria","criteriaMatch","Boolean","querySelector","MODAL_OVERLAY_CLASS","DEFAULT_TOOLTIP_BORDER_RADIUS","DEFAULT_MODAL_BORDER_RADIUS","PRIMARY_COLOR","renderProgressBar","currentGuide","currentStep","currentStepIndex","progressBarData","progressBar","color","borderRadius","syncSteps","step","async","progress","findIndex","renderCloseXButton","stepType","disabled","module","t","createElement","n","box","content","o","split","i","r","s","a","reference","floating","l","c","f","u","d","h","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","padding","g","w","v","getClippingRect","isElement","contextElement","getDocumentElement","convertOffsetParentRelativeRectToViewportRelativeRect","offsetParent","getOffsetParent","min","max","options","getDimensions","b","E","T","R","_","L","S","k","centerOffset","main","cross","start","end","concat","middlewareData","alignment","allowedPlacements","autoAlignment","autoPlacement","O","isRTL","reset","skip","D","H","overflows","C","A","slice","sort","P","find","initialPlacement","mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment","flip","referenceHiddenOffsets","referenceHidden","escapedOffsets","escaped","toString","nodeName","HTMLElement","W","ShadowRoot","z","overflow","overflowX","overflowY","M","N","navigator","userAgent","transform","perspective","contain","willChange","U","j","B","F","offsetWidth","offsetHeight","V","Node","q","X","Y","clientLeft","clientTop","I","assignedSlot","parentNode","host","G","J","K","Q","Z","visualViewport","$","innerWidth","scale","offsetLeft","offsetTop","scrollWidth","scrollHeight","direction","tt","getRootNode","contains","et","getElementRects","getClientRects","Array","from","nt","middleware","Set","fn","add","ot","it","__awaiter","__generator","label","toFlip","toShift","hideOnReferenceHidden","hideOnTooltipEscape","arrowSizeScale","resetPlacementOnUpdate","__spreadArray","limiter","sent","hide","setAttribute","style","visibility","isShown","fui","rt","allowHTML","transitionDuration","hideOnClick","onClickOutside","onShow","onHide","onRemove","showOnCreate","maxWidth","updateDebounce","zIndex","updateOnEvents","st","clearTimeout","at","lt","isRemoved","toHideTooltip","clickHandler","tooltipElement","tp","textContent","head","appendChild","hookEventListeners","debouncedUpdate","update","autoUpdateCleanup","ancestorScroll","ancestorResize","elementResize","animationFrame","passive","cancelAnimationFrame","updateTransitionDuration","className","innerHTML","innerText","setState","getState","__assign","show","remove","require$$0","createTooltip","floatingTooltip","renderTooltip","uid","navSection","nextButton","prevButton","dismissLink","renderNavButtons","tooltipInstance","bodyContent","render","text","areNumbersEqual","num1","num2","num1Precision","substring","num2Precision","targetSelector","stageGap","opacity","obj","stagedTargetClass","undefined","createOverlay","focusTrap","addFocusTrap","escToClose","clickOutsideToClose","resetBackdrop","resizeObservers","overlaySelectorClass","Backdrop","timeoutID","timers","timeout","toStopOverlay","removeOverlay","documentWidth","documentHeight","targetElement","getDocumentDimensions","targetPosition","hTop","hBottom","vLeft","vRight","overlayStyle","background","border","cssText","el","classList","hTopHeight","hTopWidth","hBottomHeight","overlaySumWidth","overlaySumHeight","querySelectorAll","ro","deactivate","defaultBackdropData","nextOnOverlayClick","defaultOffset","defaultToolipActions","eventType","consolidateActions","Tooltip","fuitInstance","removeAllEventListeners","backdropInstance","isTooltipShown","getElementsByClassName","addEventListenerToTarget","_c","_d","instance","addBackdrop","_e","next","prev","getListenerFromMethod","targetsAndEventListeners","addModal","escEventListener","overlayClickEventListener","Modal","keyCode","close","modalOverlay","modal","display","justifyContent","alignItems","lusiftWrapper","createModal","overlayElement","getElementById","tip","tipID","beaconID","addBeacon","repositionBeacon","Hotspot","beaconData","toggleTooltip","targetTop","targetLeft","targetHeight","targetWidth","beaconContainer","beaconElement","beaconEventReceiver","createBeacon","beacon","activeHotspot","hideTooltip","isDevMode","removeMethod","removeAndCloseAsync","createHotspotTooltip","event","parentElement","removeResizeObservers","startStepInstance","stepData","activeStepInstance","candidateSelectors","candidateSelector","join","matches","msMatchesSelector","webkitMatchesSelector","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","tabIndex","sortOrderedTabbables","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","radioSet","radioScope","form","queryRadios","CSS","escape","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","displayCheck","nodeUnderDetails","_node$getBoundingClie","isHidden","children","child","isDetailsWithSummary","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","tabbable","regularTabbables","orderedTabbables","candidates","includeContainer","unshift","getCandidates","candidate","candidateTabindex","focusableCandidateSelector","isFocusable","Error","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_defineProperty","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","deactivateTrap","unpause","idx","valueOrHandler","_len","params","_key","getActualTarget","shadowRoot","composedPath","createFocusTrap","userOptions","doc","config","source","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","delayInitialFocusTimer","getOption","configOverrideOptions","optionName","configOptionName","containersContain","container","getNodeForOption","optionValue","_len2","_key2","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","tabbableNodes","lastTabbableNode","group","tryFocus","focus","preventScroll","select","isSelectableInput","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","returnFocus","allowOutsideClick","preventDefault","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","isEscapeEvent","isTabEvent","destinationNode","containerIndex","_ref","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","lastOfGroupIndex","_ref3","_destinationGroupIndex","checkTab","checkClick","addListeners","capture","removeListeners","activate","activateOptions","onActivate","onPostActivate","checkCanFocusTrap","finishActivation","then","deactivateOptions","onDeactivate","onPostDeactivate","checkCanReturnFocus","finishDeactivation","updateContainerElements","containerElements","elementsAsArray","ft","focusTrap.createFocusTrap","initialFocus","localGuideState","guideData","newTrackingState","generateNewTrackingState","setTrackingState","Guide","finished","prematurelyClosed","enabled","getTrackingState","removeIllegalSteps","attemptToStartAsyncSteps","attemptToShowActiveStep","activeSteps","stepInstance","removeAllActiveSteps","isAsyncStep","displayCriteriaMatches","doesStepMatchDisplayCriteria","isStepAlreadyActive","existingState","newStepNum","onClose","disable","newStep","closeCurrentStep","setStep","onNext","onPrev","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","freeExports","exports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","mapToArray","setToArray","func","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Symbol","Uint8Array","propertyIsEnumerable","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Promise","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","ListCache","MapCache","SetCache","__data__","Stack","arrayLikeKeys","inherited","isArr","isArray","isArg","isArguments","isBuff","isType","skipIndexes","iteratee","baseTimes","String","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isMasked","isFunction","baseKeys","Ctor","proto","arrLength","seen","arrValue","othIndex","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getSymbols","getMapData","getValue","pop","hash","string","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","isLength","baseUnary","noOp","lusiftDefault","lusiftCustom","customStyle","docFrag","createDocumentFragment","addDefaultCSS","localData","enabledGuideID","showContent","localGuideData","guideDataWithoutHooks","isEqual","stateToSave","contentWithoutBodyContent","doNotResetTrackerOnContentChange","stepsWithoutBodyContent","hasGuideDataChanged","dataOfActiveGuideChanged","contentIDExists","reconcileContentWithLocalState","showEnabledContent","contentID","reRenderStepElements","newGuideInstance","prepareHooks","activeGuideInstance","nextStep","prevStep","goto","styleText","stepNumber","BodyComponent","ReactDOM","React","reactRender","elementToRender","vanillaRender"],"mappings":"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"}