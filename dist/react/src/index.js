!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("tslib"),require("@floating-ui/dom"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","tslib","@floating-ui/dom","react-dom"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["Lusift-react"]=e(t.React,t.tslib,t.require$$1,t.ReactDOM)}(this,(function(t,e,n,i){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=o(t),a=o(e),s=o(n),c=o(i),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{},l=console.log;function p(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];console.warn.apply(console,e.__spreadArray(["Lusift: "+t],n,!1))}function f(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];console.error.apply(console,e.__spreadArray(["Lusift: "+t],n,!1))}u.window||f("window is undefined");var h="lusift_state",v=function(){try{var t=u.window.localStorage.getItem(h);if(!t)return;return JSON.parse(t)}catch(t){return}},g=function(t){try{var e=JSON.stringify(t);u.window.localStorage.setItem(h,e)}catch(t){}};function b(t){return t instanceof Object&&t.constructor===Object}function m(t){return b(t)||void 0===t}function y(t){var e=["bottom","top","right","left","auto"];return e.forEach((function(t){e.push(t+"-start"),e.push(t+"-end")})),b(t)&&"boolean"==typeof t.arrow&&(!t.offset||t.offset instanceof Object&&2===t.offset.length)&&(!t.actions||b(t.actions))&&e.includes(t.placement)&&("string"==typeof t.contentBody||!t.contentBody&&"boolean"!=typeof t.contentBody)&&m(t.progressOn)&&m(t.backdrop)}function w(t){return b(t)&&"number"==typeof t.index&&["tooltip","hotspot","modal"].includes(t.type)&&function(t,e){var n="string"==typeof t.elementSelector&&!!t.elementSelector;return b(t)&&(n||"modal"===e)&&b(t.path)&&"string"==typeof t.path.comparator&&["is","contains","endsWith","startsWith"].includes(t.path.comparator)&&"string"==typeof t.path.value}(t.target,t.type)&&(function(t){return y(t.data)&&m(t.styleProps)&&"tooltip"===t.type&&y(t.data)}(t)||function(t){return"hotspot"===t.type}(t)||function(t){return"modal"===t.type&&b(t.data)&&m(t.closeButton)}(t))}function x(t){var e=["guide"];return b(t)&&Object.values(t).every((function(t){return typeof e.includes(t.type)&&function(t){return b(t)&&"string"==typeof t.id&&!!t.id&&"string"==typeof t.name&&"string"==typeof t.description&&t.steps instanceof Object&&t.steps.hasOwnProperty("length")&&t.steps.every(w)}(t.data)}))}function S(t,e){var n=Object.assign({},t);return b(t)&&b(e)&&Object.keys(e).forEach((function(i){var o,r;b(e[i])?i in t?n[i]=S(t[i],e[i]):Object.assign(n,((o={})[i]=e[i],o)):Object.assign(n,((r={})[i]=e[i],r))})),n}var k=function(t){var e="";return Object.keys(t).forEach((function(n){e+=n.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))+": "+t[n]+" !important;\n"})),e},E=function(t){var e=t.guideID,n=t.index;return"lusift--g-"+e+"--"+t.type+"-"+n},O=function(t){var e=u.document.documentElement,n=u.document.body,i=u.window.pageYOffset||e.scrollTop||n.scrollTop,o=u.window.pageXOffset||e.scrollLeft||n.scrollLeft,r=t.getBoundingClientRect();return{top:r.top+i,left:r.left+o,right:r.left+o+r.width,bottom:r.top+i+r.height,height:r.height,width:r.width}},T=function(t,n){var i,o,r=v(),a=u.window.Lusift.getActiveGuide().id;g(e.__assign(e.__assign({},r),((i={})[a]=e.__assign(e.__assign({},r[a]),{trackingState:e.__assign(e.__assign({},r[a].trackingState),{asyncSteps:e.__assign(e.__assign({},r[a].trackingState.asyncSteps),(o={},o[t]={toOpen:n},o))})}),i)))},C=function(t,e){return void 0===e&&(e=2),Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)},_=function(t){var e,n=t.value,i=t.comparator,o=u.window.location,r=o.pathname+o.hash;switch(i){case"is":return r===n;case"contains":return r.includes(n);case"endsWith":return r.endsWith(n);case"startWith":return r.startsWith(n);case"regex":return e=r,new RegExp(n,"i").test(e);default:return!1}},I=function(t){var e,n=t.target,i=t.type,o=_(n.path);return"modal"!==i&&(o=o&&(e=n.elementSelector,Boolean(u.document.querySelector(e)))),o},D=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],L=D.join(","),A="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,G=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:"AUDIO"!==t.nodeName&&"VIDEO"!==t.nodeName&&"DETAILS"!==t.nodeName||null!==t.getAttribute("tabindex")?t.tabIndex:0:e},P=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},j=function(t){return"INPUT"===t.tagName},N=function(t){return function(t){return j(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||t.ownerDocument,i=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=i(window.CSS.escape(t.name));else try{e=i(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var o=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!o||o===t}(t)},R=function(t,e){return!(e.disabled||function(t){return j(t)&&"hidden"===t.type}(e)||function(t,e){if("hidden"===getComputedStyle(t).visibility)return!0;var n=A.call(t,"details>summary:first-of-type")?t.parentElement:t;if(A.call(n,"details:not([open]) *"))return!0;if(e&&"full"!==e){if("non-zero-area"===e){var i=t.getBoundingClientRect(),o=i.width,r=i.height;return 0===o&&0===r}}else for(;t;){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}(e,t.displayCheck)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(j(t)||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||"BUTTON"===t.tagName)for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var i=e.children.item(n);if("LEGEND"===i.tagName)return!i.contains(t)}return!0}e=e.parentElement}return!1}(e))},H=function(t,e){return!(!R(t,e)||N(e)||G(e)<0)},B=function(t,e){var n=[],i=[],o=function(t,e,n){var i=Array.prototype.slice.apply(t.querySelectorAll(L));return e&&A.call(t,L)&&i.unshift(t),i.filter(n)}(t,(e=e||{}).includeContainer,H.bind(null,e));return o.forEach((function(t,e){var o=G(t);0===o?n.push(t):i.push({documentOrder:e,tabIndex:o,node:t})})),i.sort(P).map((function(t){return t.node})).concat(n)},z=D.concat("iframe").join(","),M=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==A.call(t,z)&&R(e,t)};
/*!
	* focus-trap 6.7.1
	* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
	*/
function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W,U=(W=[],{activateTrap:function(t){if(W.length>0){var e=W[W.length-1];e!==t&&e.pause()}var n=W.indexOf(t);-1===n||W.splice(n,1),W.push(t)},deactivateTrap:function(t){var e=W.indexOf(t);-1!==e&&W.splice(e,1),W.length>0&&W[W.length-1].unpause()}}),V=function(t){return setTimeout(t,0)},X=function(t,e){var n=-1;return t.every((function(t,i){return!e(t)||(n=i,!1)})),n},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return"function"==typeof t?t.apply(void 0,n):t},J=function(t){return t.target.shadowRoot&&"function"==typeof t.composedPath?t.composedPath()[0]:t.target},K=function(t,e){var n,i=(null==e?void 0:e.document)||document,o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),r={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a=function(t,e,n){return t&&void 0!==t[e]?t[e]:o[n||e]},s=function(t){return!(!t||!r.containers.some((function(e){return e.contains(t)})))},c=function(t){var e=o[t];if("function"==typeof e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e=e.apply(void 0,r)}if(!e){if(void 0===e||!1===e)return e;throw new Error("`".concat(t,"` was specified but was not a node, or did not return a node"))}var s=e;if("string"==typeof e&&!(s=i.querySelector(e)))throw new Error("`".concat(t,"` as selector refers to no known node"));return s},d=function(){var t=c("initialFocus");if(!1===t)return!1;if(void 0===t)if(s(i.activeElement))t=i.activeElement;else{var e=r.tabbableGroups[0];t=e&&e.firstTabbableNode||c("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},u=function(){if(r.tabbableGroups=r.containers.map((function(t){var e=B(t);if(e.length>0)return{container:t,firstTabbableNode:e[0],lastTabbableNode:e[e.length-1]}})).filter((function(t){return!!t})),r.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},l=function t(e){!1!==e&&e!==i.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!o.preventScroll}),r.mostRecentlyFocusedNode=e,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(e)&&e.select()):t(d()))},p=function(t){var e=c("setReturnFocus",t);return e||!1!==e&&t},f=function(t){var e=J(t);s(e)||(Y(o.clickOutsideDeactivates,t)?n.deactivate({returnFocus:o.returnFocusOnDeactivate&&!M(e)}):Y(o.allowOutsideClick,t)||t.preventDefault())},h=function(t){var e=J(t),n=s(e);n||e instanceof Document?n&&(r.mostRecentlyFocusedNode=e):(t.stopImmediatePropagation(),l(r.mostRecentlyFocusedNode||d()))},v=function(t){if(function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&!1!==Y(o.escapeDeactivates,t))return t.preventDefault(),void n.deactivate();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){var e=J(t);u();var n=null;if(r.tabbableGroups.length>0){var i=X(r.tabbableGroups,(function(t){return t.container.contains(e)}));if(i<0)n=t.shiftKey?r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:r.tabbableGroups[0].firstTabbableNode;else if(t.shiftKey){var o=X(r.tabbableGroups,(function(t){var n=t.firstTabbableNode;return e===n}));if(o<0&&r.tabbableGroups[i].container===e&&(o=i),o>=0){var a=0===o?r.tabbableGroups.length-1:o-1;n=r.tabbableGroups[a].lastTabbableNode}}else{var s=X(r.tabbableGroups,(function(t){var n=t.lastTabbableNode;return e===n}));if(s<0&&r.tabbableGroups[i].container===e&&(s=i),s>=0){var d=s===r.tabbableGroups.length-1?0:s+1;n=r.tabbableGroups[d].firstTabbableNode}}}else n=c("fallbackFocus");n&&(t.preventDefault(),l(n))}(t)},g=function(t){if(!Y(o.clickOutsideDeactivates,t)){var e=J(t);s(e)||Y(o.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())}},b=function(){if(r.active)return U.activateTrap(n),r.delayInitialFocusTimer=o.delayInitialFocus?V((function(){l(d())})):l(d()),i.addEventListener("focusin",h,!0),i.addEventListener("mousedown",f,{capture:!0,passive:!1}),i.addEventListener("touchstart",f,{capture:!0,passive:!1}),i.addEventListener("click",g,{capture:!0,passive:!1}),i.addEventListener("keydown",v,{capture:!0,passive:!1}),n},m=function(){if(r.active)return i.removeEventListener("focusin",h,!0),i.removeEventListener("mousedown",f,!0),i.removeEventListener("touchstart",f,!0),i.removeEventListener("click",g,!0),i.removeEventListener("keydown",v,!0),n};return(n={activate:function(t){if(r.active)return this;var e=a(t,"onActivate"),n=a(t,"onPostActivate"),o=a(t,"checkCanFocusTrap");o||u(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=i.activeElement,e&&e();var s=function(){o&&u(),b(),n&&n()};return o?(o(r.containers.concat()).then(s,s),this):(s(),this)},deactivate:function(t){if(!r.active)return this;clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,m(),r.active=!1,r.paused=!1,U.deactivateTrap(n);var e=a(t,"onDeactivate"),i=a(t,"onPostDeactivate"),o=a(t,"checkCanReturnFocus");e&&e();var s=a(t,"returnFocus","returnFocusOnDeactivate"),c=function(){V((function(){s&&l(p(r.nodeFocusedBeforeActivation)),i&&i()}))};return s&&o?(o(p(r.nodeFocusedBeforeActivation)).then(c,c),this):(c(),this)},pause:function(){return r.paused||!r.active||(r.paused=!0,m()),this},unpause:function(){return r.paused&&r.active?(r.paused=!1,u(),b(),this):this},updateContainerElements:function(t){var e=[].concat(t).filter(Boolean);return r.containers=e.map((function(t){return"string"==typeof t?i.querySelector(t):t})),r.active&&u(),this}}).updateContainerElements(t),n},$=function(t){var e=t.target,n=t.escapeDeactivates,i=void 0===n?function(t){return!1}:n,o=t.clickOutsideDeactivates,r=K(e,{delayInitialFocus:!1,escapeDeactivates:i,clickOutsideDeactivates:void 0===o?function(t){return!1}:o});return r.activate(),r};function Z(t,e){return 0===e?t:function(i){clearTimeout(n),n=setTimeout((function(){t(i)}),e)};var n}var Q="lusift-modal-overlay",tt="modal",et="4px",nt="4px",it=function(){var t,e=v()[null===(t=u.window.Lusift.getActiveGuide())||void 0===t?void 0:t.id];if(!e)return"";if(!e){return'\n      <progress class="lusift-progress" aria-label="progressbar" max="100" value="66.66">\n        66.66%\n      </progress>\n    '}var n=u.window.Lusift,i=n.getContent()[n.getActiveGuide().id].data.steps[e.trackingState.currentStepIndex],o=e.progressBar||{},r=o.height,a=void 0===r?"3px":r,s=o.color,c=void 0===s?"#17a3a8":s,d=o.borderRadius;d||(d="modal"===i.type?i.styleProps&&i.styleProps.borderRadius||nt:i.styleProps&&i.styleProps.borderRadius||et);var l=n.getActiveGuide().instance.getProgress();return"\n        <style>\n          .lusift-progress {\n            height: "+a+";\n          }\n          .lusift-progress::-webkit-progress-bar {\n            border-radius: "+d+"; /*border-radius of tooltip*/\n          }\n          .lusift-progress::-webkit-progress-value {\n            background-color: "+c+'; /*color of progress bar*/\n          }\n        </style>\n\n        <progress class="lusift-progress" aria-label="progressbar" max="100" value="'+l+'">\n          '+l+"%\n        </progress>\n    "},ot=function(t,e){return t.disabled?'<div style="margin-top: 0.7rem"></div>':"\n    <style>\n      .lusift ."+e.toLowerCase()+" .closeX{\n        "+k(t.styleProps)+'\n      }\n    </style>\n\n    <section class="close-btn">\n      <button onclick="Lusift.close()" class="closeX close">&times;</button>\n    </section>\n  '},rt={exports:{}};!function(t,e){t.exports=function(t,e){function n(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd","oTransitionEnd"].forEach((function(e){t[i](e,n)}))}function i(t,e){t.setAttribute("data-transition-state",e),console.log(">> new transition state: "+e)}function o(t,e){t.setAttribute("data-state",e),Object.assign(t.style,{visibility:e})}function r(){return document.createElement("div")}function a(t){return{box:t.querySelector(".floating-ui-tooltip-box"),content:t.querySelector(".floating-ui-tooltip-content"),arrow:t.querySelector(".floating-ui-tooltip-arrow")||void 0}}var s="";function c(t,e){var r=t._instance,a=t.getAttribute("data-transition-state");if(console.log("``````````"),console.log("\n"),console.log(e,a),"visible"===e){if("shown"===a||"showing"===a)return void console.log("already "+a);if("hidden"===a)console.log("showing"),s="",i(t,"showing");else if("hiding"===a)return console.log("cancelling "+a),void(s=e)}else{if("hidden"===a||"hiding"===a)return void console.log("already "+a);if("shown"===a)i(t,"hiding"),s="",r.props.onHide(r);else if("showing"===a)return console.log("cancelling "+a),void(s=e)}var d="visible"===e?"shown":"hidden";0!==r.transitionDuration?(function(t,e){function i(o){if(o.target===t){n(t,"remove",i);try{e()}catch(e){console.error(e),t._instance.props.onHide()}}}n(t,"remove",i),n(t,"add",i)}(t,(function(){!function(t,e){t._instance.setState({isShown:"visible"===e})}(t,e),i(t,d),"visible"===e&&r.props.onShow(r),s&&(console.log("LAST EVENT FIRED"),c(t,s))})),o(t,e)):(o(t,e),i(t,d),"visible"===e&&r.props.onShow(r))}var d={top:"bottom",right:"left",bottom:"top",left:"right"},u=function(n,i,o,r,s,u){return t.__awaiter(void 0,void 0,void 0,(function(){var l,p,f,h,v,g,b,m,y,w,x,S,k,E,O,T,C,_,I,D,L,A,G,P,j,N,R,H,B,z,M,F,q,W,U,V,X;return t.__generator(this,(function(Y){switch(Y.label){case 0:return f=void 0!==(p=(l={}).toFlip)&&p,v=void 0===(h=l.toShift)||h,g=n.placement,b=n.hideOnReferenceHidden,m=n.offset,y=n.hideOnTooltipEscape,w=n.arrowSizeScale,x=n.resetPlacementOnUpdate,S=n.arrow,k=n.showOnCreate,E=a(i),O=E.arrow,T=12*w,o?(C="auto"===g&&(s||x),_="auto"!==g&&f,I=v&&s,D={middleware:t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray([e.offset({mainAxis:m[0],crossAxis:m[1]})],C?[e.autoPlacement()]:[],!0),I?[e.shift({padding:16})]:[],!0),_?[e.flip({fallbackPlacements:["right","left"],fallbackStrategy:"initialPlacement"})]:[],!0),S?[e.arrow({element:O,padding:2})]:[],!0),[e.size({apply:function(t){t.width,t.height,t.reference,t.floating}}),e.hide()],!1)},"auto"!==g&&(D.placement=g),[4,e.computePosition(o,i,D)]):[2];case 1:switch(L=Y.sent(),A=L.x,G=L.y,P=L.placement,j=L.middlewareData,N=j.hide,R=N.referenceHidden,H=N.escaped,R&&s&&o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),j.arrow&&(B=j.arrow.x,z=j.arrow.y),M=0!==j.arrow.centerOffset,"visible"==(F=b&&R||y&&H||r?"hidden":"visible")&&s&&!k&&(F="hidden"),c(i,F),Object.assign(i.style,{left:A+"px",top:G+"px"}),q=d[P.split("-")[0]],W=0,U=0,V=0,V=null!==B?B+T+"px":"",q){case"top":W=1/1.7,V=null!==B?B+T*W+"px":"";break;case"bottom":W=.5,V=null!==B?B+T*W+"px":"";break;case"left":W=.005,V=null!==B?B+"px":"",U=null!==z?z-T*W/2+"px":"";break;case"right":W=1.2,V=null!==B?B+"px":"",U=null!==z?z-T*W/2+"px":""}return U=null!==z?z-T*W/2+"px":"",U=null!==z?z+"px":"",Object.assign(O.style,((X={visibility:M?"hidden":"visible",left:V,top:U,right:"",bottom:""})[q]="-"+T*W+"px",X)),u({fui:L}),[2,L]}}))}))},l={allowHTML:!0,content:"",arrow:!0,scrollIntoView:!1,transitionDuration:[300,250],offset:[10,0],hideOnClick:!0,onClickOutside:function(t,e){},onShow:function(t){},onHide:function(t){},onStateChange:function(t,e){},onRemove:function(){},placement:"top",resetPlacementOnUpdate:!1,hideOnTooltipEscape:!0,hideOnReferenceHidden:!0,showOnCreate:!0,maxWidth:350,updateDebounce:100,zIndex:99999,arrowSizeScale:1,updateOnEvents:"resize scroll"},p=function(){function n(t,e){var n,i=this;this.state={isShown:!1,isRemoved:!1,fui:void 0},this.updateListenerCleanup=function(){},this.toHideTooltip=!1,this.transitionDuration=0,this.clickHandler=function(t){i.state.isShown&&(i.tooltipElement.contains(t.target)||i.reference.contains(t.target)||i.props.onClickOutside&&i.props.onClickOutside(i,t),"target"===i.props.hideOnClick?t.target===i.reference&&i.hide():i.props.hideOnClick&&i.hide())},this.props=t,this.reference=e,(n=document.createElement("style")).type="text/css",n.setAttribute("floating-ui-tooltip-default",""),n.textContent=".floating-ui-tooltip-root{--color:#fff;--border-color:#fefefe;--border-color:red;backface-visibility:hidden;background:var(--color);border-radius:6px;box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);display:flex;font-size:90%;line-height:0px;margin:0;max-width:calc(100vw - 10px);padding:0;position:absolute;transition-duration:.2s;transition-property:transform,visibility,opacity;transition-timing-function:cubic-bezier(.54,1.5,.38,1.11);z-index:9999}.floating-ui-tooltip-arrow{box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);height:14px;position:absolute;transform:translateX(-50%) rotate(45deg);width:14px;z-index:-1}.floating-ui-tooltip-box{border-radius:inherit;line-height:normal;margin:0;outline:0;position:relative}.floating-ui-tooltip-root[data-state=hidden]{opacity:0}.floating-ui-tooltip-root[data-state=visible]{opacity:1}.floating-ui-tooltip-content{background-color:#fff;border-radius:inherit;color:#111;padding:0;position:relative;z-index:2}.floating-ui-tooltip-arrow,.floating-ui-tooltip-root{background:var(--color)}",document.head.appendChild(n),this.toHideTooltip=!this.props.showOnCreate}return n.prototype.hookEventListeners=function(){var t,n,i,o=this;this.debouncedUpdate=(t=this.update.bind(this),0===(n=this.props.updateDebounce)?t:function(e){clearTimeout(i),i=setTimeout((function(){t(e)}),n)});var r=e.autoUpdate(this.reference,this.tooltipElement,(function(){return o.debouncedUpdate(void 0)})),a=function(){return o.debouncedUpdate(void 0)};this.props.updateOnEvents.split(" ").forEach((function(t){window.addEventListener(t,a)})),window.addEventListener("click",this.clickHandler.bind(this)),this.updateListenerCleanup=function(){r(),window.removeEventListener("click",o.clickHandler.bind(o)),o.props.updateOnEvents.split(" ").forEach((function(t){window.removeEventListener(t,a)}))}},n.prototype.updateTransitionDuration=function(t){this.transitionDuration=t,this.tooltipElement.style.transitionDuration=t+"ms"},n.prototype.create=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n,s,c,d;return t.__generator(this,(function(t){switch(t.label){case 0:return e=!this.props.showOnCreate,this.tooltipElement=(l=this,p=r(),f=r(),h=r(),v=r(),p.className="floating-ui-tooltip-root",f.className="floating-ui-tooltip-box",h.className="floating-ui-tooltip-content",v.className="floating-ui-tooltip-arrow",f.appendChild(h),f.appendChild(v),p.appendChild(f),Object.assign(h.style,{maxWidth:l.props.maxWidth+"px"}),h.innerHTML='\n    <div id="tooltip-container">\n    <h3>Default tooltip</h3>\n    </div>\n  ',f.setAttribute("role","tooltip"),o(p,"hidden"),i(p,"hidden"),Object.assign(p.style,{zIndex:l.props.zIndex,visibility:"hidden",left:"0px",top:"0px"}),p._instance=l,p),this.updateTransitionDuration(this.props.transitionDuration[e?0:1]),n=a(this.tooltipElement).content,s=this.props,c=s.allowHTML,d=s.content,c?n.innerHTML=d:n.innerText=""+d,document.body.appendChild(this.tooltipElement),[4,u(this.props,this.tooltipElement,this.reference,e,!0,this.setState.bind(this))];case 1:return t.sent(),this.hookEventListeners(),[2]}var l,p,f,h,v}))}))},n.prototype.getState=function(){return this.state},n.prototype.setState=function(e){void 0!==e.isShown&&e.isShown!==this.state.isShown&&this.updateTransitionDuration(this.props.transitionDuration[e.isShown?1:0]),this.props.onStateChange(this.state,e),this.state=t.__assign(t.__assign({},this.state),e)},n.prototype.update=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return e=e||this.toHideTooltip||!1,[4,u(this.props,this.tooltipElement,this.reference,e,!1,this.setState.bind(this))];case 1:return t.sent(),[2]}}))}))},n.prototype.hide=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!0,[4,this.update(!0)];case 1:return t.sent(),[2]}}))}))},n.prototype.show=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!1,[4,this.update(!1)];case 1:return t.sent(),[2]}}))}))},n.prototype.remove=function(){this.tooltipElement.remove(),this.state={isShown:!1,isRemoved:!0,fui:void 0},this.updateListenerCleanup(),console.log("removed all event listeners and observers"),this.props.onRemove()},n}();return function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var i,o,r,a,s;return t.__generator(this,(function(c){switch(c.label){case 0:return i=n.placement||l.placement,o=n.transitionDuration||l.transitionDuration,r=n.offset||l.offset,Object.keys(n).forEach((function(t){return void 0===n[t]&&delete n[t]})),a=t.__assign(t.__assign(t.__assign({},l),n),{placement:i,transitionDuration:o,offset:r}),[4,(s=new p(a,e)).create()];case 1:return c.sent(),[2,{props:s.props,reference:s.reference,tooltipElement:s.tooltipElement,getState:s.getState.bind(s),show:s.show.bind(s),hide:s.hide.bind(s),remove:s.remove.bind(s),update:s.update.bind(s)}]}}))}))}}(a.default,s.default)}(rt);var at=rt.exports,st=function(t){return e.__awaiter(void 0,void 0,void 0,(function(){var n,i,o,r,a,s,c,d,u,l,p,f;return e.__generator(this,(function(e){return n=t.target,i=t.content,o=t.arrow,r=t.offset,a=t.placement,s=t.onShow,c=t.onHide,d=t.showOnCreate,u=t.onClickOutside,l=t.hideOnReferenceHidden,p=t.hideOnTooltipEscape,f=t.scrollIntoView,[2,at(n,{allowHTML:!0,zIndex:99999,hideOnClick:!1,onClickOutside:u,onShow:s,onHide:c,content:i,hideOnReferenceHidden:l,hideOnTooltipEscape:p,arrow:o,offset:r,placement:a,showOnCreate:d,scrollIntoView:f})]}))}))},ct=function(t){var n=t.data,i=t.target,o=t.styleProps,r=t.actions,a=t.uid,s=t.index,c=t.onShow,d=t.onHide,u=t.scrollIntoView;return e.__awaiter(void 0,void 0,void 0,(function(){var t,l,p,f,h,v,g,b,m,y;return e.__generator(this,(function(e){switch(e.label){case 0:return t=r.closeButton,l=r.navSection,p=n.arrow,f=n.placement,h=n.offset,v="\n    <style>\n      .tippy-box{\n        border-radius: 4px;\n        "+k(o)+'\n      }\n    </style>\n\n    <div class="lusift">\n      '+it()+'\n      <div class="tooltip" id="tooltip-'+a+'">\n        '+ot(t,"tooltip")+'\n        <section class="body-content">\n        </section>\n        '+function(t){var e=t.nextButton,n=t.prevButton,i=t.dismissLink;return"\n    <style>\n    .lusift .tooltip section.nav-buttons{\n      "+k(t.styleProps)+"\n    }\n    .lusift .tooltip .nav-buttons .next{\n      "+k(e.styleProps)+"\n    }\n    .lusift .tooltip .nav-buttons .prev{\n      "+k(n.styleProps)+'\n    }\n    </style>\n\n    <section class="nav-buttons">\n      '+(i.disabled?"":'\n        <button onclick="Lusift.close()" class="close dismiss-link">\n          '+i.text+"\n        </button>\n        ")+"\n      "+(n.disabled?"":'<button onclick="Lusift.prev()" class="prev lusift-button">'+e.text+"</button>")+"\n      "+(e.disabled?"":'<button onclick="Lusift.next()" class="next lusift-button">'+n.text+"</button>")+"\n    </section>\n  "}(l)+"\n      </div>\n    <div>\n  ",[4,st({target:i,content:v,arrow:p,offset:h,placement:f,remove:function(){},onShow:c,onHide:d,scrollIntoView:u})];case 1:return g=e.sent(),b=window.Lusift,m='\n  <h3 style="font-weight: bold;">Default title</h3>\n  <p style="font-weight: normal;">Default tooltip content</p>\n',(y=b.getActiveGuide())&&(m=b.getContent()[y.id].data.steps[s].data.bodyContent),b.render(m,".lusift > .tooltip > .body-content",(function(){g.update()})),[2,g]}}))}))},dt=function(t,e){var n=t.toString().substring(t.toString().indexOf(".")).length-1;-1==t.toString().indexOf(".")&&(n=0);var i=e.toString().substring(e.toString().indexOf(".")).length-1;-1==e.toString().indexOf(".")&&(i=0);var o=Math.min(n,i);return o>2&&(o=1),C(t,o)===C(e,o)};Object.fromEntries=function(t){return Object.assign.apply(Object,e.__spreadArray([{}],t.map((function(t){var e,n=t[0],i=t[1];return(e={})[n]=i,e})),!1))};var ut=function(){function t(t){var e=t.targetSelector,n=t.guideID,i=t.index,o=t.data;this.overlaySelectorClass="lusift-backdrop-overlay",this.data={stageGap:5,opacity:"0.5",color:"#444"},this.toStopOverlay=!1;var r,a=E({guideID:n,index:i,type:"backdrop"});this.stagedTargetClass=a+"__target",this.data=Object.assign({},this.data,(r=o,Object.fromEntries(Object.entries(r).filter((function(t){return t[0],void 0!==t[1]}))))),this.targetSelector=e,this.createOverlay(),this.focusTrap=$({target:[".lusift > .tooltip",this.targetSelector]})}return t.prototype.resetBackdrop=function(){if(this.toStopOverlay)return f("Lusift: This overlay instance should be removed");this.removeOverlay(),this.createOverlay()},t.prototype.createOverlay=function(){var t=this,n=u.document.querySelector(this.targetSelector),i=this.data.stageGap,o=function(){var t=O(u.document.documentElement),e=t.height,n=t.width;return{documentWidth:Math.max(n,u.document.body.scrollWidth,u.document.documentElement.scrollWidth,u.document.body.offsetWidth,u.document.documentElement.offsetWidth),documentHeight:Math.max(e,u.document.body.scrollHeight,u.document.documentElement.scrollHeight,u.document.body.offsetHeight,u.document.documentElement.offsetHeight)}}(),r=o.documentHeight,a=o.documentWidth,s=O(n),c=u.document.createElement("div");c.id="hTop";var d=u.document.createElement("div");d.id="hBottom";var l=u.document.createElement("div");l.id="vLeft";var p=u.document.createElement("div");p.id="vRight";var f={opacity:"0.5",background:"#444",transition:"visibility 0.3s ease-in-out",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:99998,border:"1px solid transparent"};c.style.cssText=k(e.__assign(e.__assign({},f),{height:s.bottom-s.height-i+"px",width:s.right-s.left+2*i+"px",left:s.left-i+"px",bottom:s.top-i+"px"})),d.style.cssText=k(e.__assign(e.__assign({},f),{height:r-(s.top+s.height+i)+"px",width:s.right-s.left+2*i+"px",left:s.left-i+"px",top:s.bottom+i+"px"})),l.style.cssText=k(e.__assign(e.__assign({},f),{width:s.left-i+"px",height:r+"px",right:s.left-i+"px"})),p.style.cssText=k(e.__assign(e.__assign({},f),{width:a-(s.left+s.width)-i+"px",height:r+"px",left:s.right+i+"px"})),[c,d,l,p].forEach((function(e){e.classList.add(t.overlaySelectorClass),u.document.body.appendChild(e)})),n.classList.add(this.stagedTargetClass);var h=O(c),v=h.height,g=h.width,b=O(d).height,m=g+O(l).width+O(p).width,y=v+b+s.height+2*i;dt(a,m)&&dt(r,y)||this.resetBackdrop()},t.prototype.removeOverlay=function(){u.document.querySelectorAll("."+this.overlaySelectorClass).forEach((function(t){t&&t.remove()}));var t=u.document.querySelector(this.targetSelector);t&&t.classList.remove(this.stagedTargetClass)},t.prototype.remove=function(){this.toStopOverlay=!0,this.focusTrap&&this.focusTrap.deactivate(),this.removeOverlay()},t}(),lt=[12,0],pt=function(){function t(t){var n=t.target,i=t.guideID,o=t.index,r=t.data,a=t.actions,s=t.styleProps,c=t.onRemove;this.styleProps={},this.targetsAndEventListeners=[],this.isTooltipShown=!1,l("%c Tooltip constructor! ","background: #222; color: #bada55"),this.target=n,this.actions=a;var d=n.elementSelector;this.styleProps=s||{},this.data=r,this.index=o,this.onRemove=c;var p=r.progressOn||{};this.data.progressOn=e.__assign({eventType:"click",elementSelector:d},p),this.data.offset=this.data.offset||lt,this.data.backdrop.disabled||(this.data.offset[0]=this.data.offset[0]+this.data.backdrop.stageGap),this.uid=E({guideID:i,index:o,type:"tooltip"}),this.guideID=i,this.targetElement=u.document.querySelector(d),this.show(),l("tooltip started")}return t.prototype.hide=function(){this.fuitInstance.hide(),this.removeAllEventListeners(),this.backdropInstance&&this.backdropInstance.remove(),this.backdropInstance=null,this.isTooltipShown=!1},t.prototype.addBackdrop=function(){var t=this,e=this.data.backdrop,n={stageGap:e.stageGap,opacity:e.opacity,color:e.color};this.backdropInstance=new ut({targetSelector:this.target.elementSelector,guideID:this.guideID,index:this.index,data:n}),this.data.backdrop.nextOnOverlayClick&&Array.from(u.document.getElementsByClassName(this.backdropInstance.overlaySelectorClass)).forEach((function(e){t.addEventListenerToTarget(e,"next")}))},t.prototype.show=function(){return e.__awaiter(this,void 0,void 0,(function(){var t,i,o,r,a,s,c,d,u,l,p,h,v,g=this;return e.__generator(this,(function(e){switch(e.label){case 0:return this.targetElement?this.isTooltipShown?[2,f("Tooltip is already displayed")]:(t=this.data,i=t.progressOn,o=t.backdrop,a=(r=i).eventType,r.disabled||this.addEventListenerToTarget(this.targetElement,"next",a),this.fuitInstance?[3,2]:(c=(s=this).uid,d=s.actions,u=s.styleProps,l=s.data,p=s.index,h=this,[4,ct({uid:c,target:this.targetElement,actions:d,styleProps:u,data:l,scrollIntoView:!0,index:p,onShow:function(t){t.state.isShown&&(o.disabled||g.addBackdrop.bind(g)(),g.isTooltipShown=!0)},onHide:function(t){o.disabled||(g.backdropInstance&&g.backdropInstance.remove(),g.backdropInstance=null,g.isTooltipShown=!1)}})])):[2,f("Error: target element not found")];case 1:return h.fuitInstance=e.sent(),o.disabled||(v=Z((function(t){g.backdropInstance&&g.backdropInstance.resetBackdrop()}),100),this.backdropAutoUpdateCleanup=n.autoUpdate(this.targetElement,this.fuitInstance.tooltipElement,(function(){v(void 0)}),{ancestorScroll:!1,ancestorResize:!0,elementResize:!0})),[3,3];case 2:this.fuitInstance.show(),e.label=3;case 3:return[2]}}))}))},t.prototype.remove=function(){if(!this.isTooltipShown)return f("Attempted to remove but tooltip is not shown");l("removing tooltip "+this.uid),this.removeAllEventListeners(),this.backdropInstance&&this.backdropInstance.remove(),this.fuitInstance.remove(),this.fuitInstance=null,this.isTooltipShown=!1,this.onRemove()},t.prototype.getListenerFromMethod=function(t){switch(t){case"next":return u.window.Lusift.next;case"prev":return u.window.Lusift.prev;case"close":return this.remove;default:return function(){}}},t.prototype.addEventListenerToTarget=function(t,e,n){void 0===e&&(e="next"),void 0===n&&(n="click"),t.addEventListener(n,this.getListenerFromMethod(e)),this.targetsAndEventListeners.push({method:e,target:t,eventType:n})},t.prototype.removeAllEventListeners=function(){var t=this;this.backdropAutoUpdateCleanup&&this.backdropAutoUpdateCleanup(),this.targetsAndEventListeners.forEach((function(e){var n=e.method,i=e.target,o=e.eventType;i.removeEventListener(o,t.getListenerFromMethod(n)),l("remove event listener of type "+o+" and method "+n)})),this.targetsAndEventListeners=[]},t}(),ft=function(){return u.document.createElement("div")},ht=function(t){var e=t.uid,n=t.index,i=t.closeButton,o=void 0===i?{}:i,r=ft(),a=ft(),s=ft();r.classList.add(Q),a.id=e,a.classList.add(tt),s.classList.add("lusift"),a.innerHTML="\n    "+it()+"\n    "+ot(o,"modal")+'\n    <section class="body-content">\n    </section>\n  ',Object.assign(r.style,{position:"fixed",overflowY:"scroll",background:"rgba(40,40,40, .55)",top:"0",left:"0",bottom:"0",right:"0",zIndex:99999}),Object.assign(a.style,{margin:"15vh auto",width:"80%",maxWidth:"650px",background:"rgba(255,255,255, 1)",position:"relative",borderRadius:nt}),s.appendChild(a),r.appendChild(s),u.document.body.appendChild(r);var c=window.Lusift,d='\n  <style>\n  .body-content h2{\n    font-weight: bold;\n    font-size: 1.5rem;\n  }\n  .body-content .button-area{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 2rem 0;\n  }\n  </style>\n  <h2>Default Modal Content</h2>\n  <p>some text</p>\n  <div class="button-area">\n  <button class="button" onclick="Lusift.next()">\n  Next\n  </button>\n  </div>',l=c.getActiveGuide();return l&&(d=c.getContent()[l.id].data.steps[n].data.bodyContent),c.render(d,".lusift > .modal > .body-content"),u.document.body.classList.add("lusift-no-scroll"),function(){u.document.body.removeChild(r),u.document.body.classList.remove("lusift-no-scroll")}},vt=function(){function t(t){var e=t.index,n=t.guideID,i=t.data,o=t.closeButton,r=t.onRemove;this.data={};var a=E({guideID:n,type:"modal",index:e});this.data=i||{},e=e,o=o,this.removeModal=ht({uid:a,index:e,closeButton:o});var s=this.data,c=s.escToClose,d=s.clickOutsideToClose,l=!u.window.Lusift.getActiveGuide();this.focusTrap=$({target:".modal",escapeDeactivates:function(t){return!(l||!c)&&(u.window.Lusift.next(),!0)},clickOutsideDeactivates:function(t){return!(l||!d||t.target.classList.contains(tt)||!t.target.classList.contains(Q)||t.target.closest(".modal"))&&(u.window.Lusift.next(),!0)}}),this.onRemove=r}return t.prototype.remove=function(){this.focusTrap.deactivate(),this.removeModal(),this.onRemove()},t}(),gt=function(t){t.remove;var n=t.data,i=t.target,o=t.styleProps,r=t.uid,a=t.index,s=t.onClickOutside,c=t.showOnCreate;return e.__awaiter(void 0,void 0,void 0,(function(){var t,d,u,l,p,f,h,v;return e.__generator(this,(function(e){switch(e.label){case 0:return t=n.arrow,d=n.placement,u=n.offset,l="\n    <style>\n      .tippy-box{\n        z-index: 999999;\n        border-radius: 4px;\n        "+k(o)+"\n      }\n    </style>\n\n    "+it()+'\n    <div class="lusift">\n      <div class="hotspot-tooltip" id="tooltip-'+r+'">\n        <section class="body-content">\n        </section>\n      </div>\n    </div>\n  ',[4,st({target:i,content:l,arrow:t,offset:u,placement:d,onClickOutside:s,hideOnReferenceHidden:!1,hideOnTooltipEscape:!1,showOnCreate:c,remove:function(){}})];case 1:return p=e.sent(),f=window.Lusift,h='\n  <h3 style="font-weight: bold;">Default title</h3>\n  <p style="font-weight: normal;">Default tooltip content</p>\n',(v=f.getActiveGuide())&&(h=f.getContent()[v.id].data.steps[a].data.bodyContent),f.render(h,".lusift > .hotspot-tooltip > .body-content",(function(){p.update()})),[2,p]}}))}))};function bt(){return u.document.createElement("div")}var mt=function(t){var n=t.beaconData,i=t.beaconID,o=t.toggleTooltip,r=bt();r.classList.add("lusift-beacon-container"),Object.assign(r.style,{position:"absolute"});var a=n.size,s=n.color;n.type,r.innerHTML="\n    <style>\n      #"+i+" {\n        background-color: "+(s||"#b9f")+";\n        border-radius: 50%;\n        position: absolute;\n        pointer-events: auto;\n        width: "+13*a+"px;\n        height: "+13*a+"px;\n\n        \n        -webkit-animation: shine 2s ease-in-out infinite;\n        animation: shine 2s ease-in-out infinite;\n          \n        cursor: pointer;\n        -webkit-animation-delay: 1s;\n        animation-delay: 1s;\n      }\n\n\n      @-webkit-keyframes shine {\n        0%, 20% {\n          box-shadow: 0px 0px 0px 0px rgba(187, 153, 255, 0.49);\n        }\n        100% {\n          box-shadow: 0px 0px 0px "+20*a+"px rgba(0, 0, 0, 0);\n        }\n      }\n\n      @keyframes shine {\n        0%, 20% {\n          box-shadow: 0px 0px 0px 0px rgba(187, 153, 255, 0.49);\n        }\n        100% {\n          box-shadow: 0px 0px 0px "+20*a+'px rgba(0, 0, 0, 0);\n        }\n      }\n    }\n    </style>\n    <div class="lusift-beacon" id="'+i+'"></div>\n  ',u.document.body.appendChild(r);var c=r.querySelector("#"+i),d=bt();return d.id=i+"-er",Object.assign(d.style,e.__assign(e.__assign({},c.style),{background:"transparent",zIndex:99999})),c.appendChild(d),d.addEventListener("click",o),d},yt=function(){function t(t){var e=t.data,n=t.guideID,i=t.onRemove;l(e),this.data=e,this.onRemove=i;var o=e.index,r=e.type,a=e.target;this.tipID=E({guideID:n,type:r,index:o}),this.beaconID=E({guideID:n,type:"beacon",index:o}),this.targetElement=u.document.querySelector(a.elementSelector),this.addBeacon(),this.createTip()}return t.prototype.updateBeaconPosition=function(){var t=O(this.targetElement),e={targetTop:t.top,targetLeft:t.left,targetWidth:t.width,targetHeight:t.height},n=this.data.beacon;!function(t,e,n){var i=e.targetTop,o=e.targetLeft,r=e.targetHeight,a=e.targetWidth,s=n.top,c=n.left,d=t.getAttribute("id"),u=t.parentElement,l=t.querySelector("#"+d+"-er");Object.assign(u.style,{top:i+"px",left:o+"px"});var p=O(t),f=p.width,h=p.height;Object.assign(l.style,{width:f+"px",height:h+"px"}),Object.assign(t.style,{top:s/100*r+"px",left:c/100*a+"px"})}(u.document.getElementById(this.beaconID),e,n.placement)},t.prototype.addBeacon=function(){l("adding beacon");var t=this.data.beacon;mt({beaconData:t,beaconID:this.beaconID,toggleTooltip:this.toggleTooltip.bind(this)}),this.updateBeaconPosition()},t.prototype.createTip=function(){return e.__awaiter(this,void 0,void 0,(function(){var t,i,o,r,a,s,c,d,l,p;return e.__generator(this,(function(e){switch(e.label){case 0:return t=u.window.Lusift,i=u.document.getElementById(""+this.beaconID),o=this.data.tip,r=o.data,a=o.styleProps,s=!Boolean(t.getActiveGuide()),c=s?t.close:this.removeAndCloseAsync.bind(this),d=this,[4,gt({remove:c,uid:this.tipID,index:this.data.index,target:i,styleProps:a,showOnCreate:!1,data:r,onClickOutside:function(t,e){c()}})];case 1:return d.fuitInstance=e.sent(),l=this.updateBeaconPosition.bind(this),p=Z((function(t){l()}),100),this.beaconAutoUpdateCleanup=n.autoUpdate(this.targetElement,this.fuitInstance.tooltipElement,(function(){p(void 0)}),{ancestorScroll:!1,ancestorResize:!0,elementResize:!0}),[2]}}))}))},t.prototype.toggleTooltip=function(){return e.__awaiter(this,void 0,void 0,(function(){var t,n;return e.__generator(this,(function(e){switch(e.label){case 0:return t=u.window.Lusift.activeHotspot,n=u.window.Lusift,t&&this.data.index!==t.data.index&&n.activeHotspot.hideTooltip(),this.fuitInstance.getState().isRemoved?(f("Uh... but it doesn't exist. unexpected"),[3,5]):[3,1];case 1:return this.fuitInstance.getState().isShown?[4,this.hideTooltip()]:[3,3];case 2:return e.sent(),[3,5];case 3:return this.fuitInstance?[4,this.fuitInstance.show()]:[3,5];case 4:e.sent(),n.activeHotspot=this,e.label=5;case 5:return[2]}}))}))},t.prototype.hideTooltip=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(t){switch(t.label){case 0:return[4,this.fuitInstance.hide()];case 1:return t.sent(),u.window.Lusift.activeHotspot=null,[2]}}))}))},t.prototype.changeAsyncStepStatus=function(t){this.data.async&&T(this.data.index,t)},t.prototype.remove=function(){return e.__awaiter(this,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return l("Removing id: "+this.data.index+" hotspot"),this.fuitInstance?this.fuitInstance.getState().isShown?[4,this.hideTooltip()]:[3,2]:[3,3];case 1:e.sent(),e.label=2;case 2:return this.fuitInstance.getState().isRemoved?l("Hotspot's tooltip is already destroyed"):this.fuitInstance.remove(),[3,4];case 3:l("Hotspot closed without ever opening"),e.label=4;case 4:return(t=u.document.getElementById(this.beaconID))&&t.parentElement.remove(),[2]}}))}))},t.prototype.removeResizeObservers=function(){this.beaconAutoUpdateCleanup()},t.prototype.removeAndCloseAsync=function(){this.remove(),this.changeAsyncStepStatus(!1),this.removeResizeObservers(),this.onRemove()},t}(),wt=function(t,e,n){var i,o=t.index,r=t.target,a=t.type,s=t.data,c=t.closeButton;if("tooltip"===a){var d=t.actions,u=t.styleProps;i=new pt({target:r,data:s,index:o,guideID:e,actions:d,styleProps:u,onRemove:n})}else"modal"===a?i=new vt({index:o,guideID:e,data:s,closeButton:c,onRemove:n}):"hotspot"===a&&(i=new yt({data:t,guideID:e,onRemove:n}));return i},xt=function(){function t(t){var e;this.activeSteps=[],l("guide constructor"),l(v());var n=u.window.Lusift.getContent()[t].data,i=Object.assign({},n);this.guideData=i,l("%c Welcome to guide: "+(this.guideData.name||this.guideData.id),"background: #222; color: #bada55"),(null===(e=v()[t])||void 0===e?void 0:e.trackingState)||this.resetTrackingState()}return t.prototype.getActiveSteps=function(){return this.activeSteps},t.prototype.generateNewTrackingState=function(){var t={currentStepIndex:0,finished:!1,prematurelyClosed:!1,asyncSteps:{},enabled:!1};return this.guideData.steps.forEach((function(e){"async"in e&&e.async&&"hotspot"===e.type&&(t.asyncSteps[e.index]={toOpen:!1})})),t},t.prototype.start=function(){var t=this.getTrackingState(),e=t.finished,n=t.prematurelyClosed;this.removeIllegalSteps(),this.attemptToStartAsyncSteps(),e||n?f("Guide is already finished or closed"):this.attemptToShowActiveStep()},t.prototype.removeAllActiveSteps=function(){this.activeSteps.forEach((function(t){var e=t.type;t.target;var n=t.instance;t.async&&"hotspot"===e&&n.removeResizeObservers(),n.remove()})),this.activeSteps=[]},t.prototype.reRenderStepElements=function(){l("re-render step elements"),this.removeAllActiveSteps(),this.start()},t.prototype.attemptToShowActiveStep=function(){var t,e=this,n=this.getTrackingState().currentStepIndex,i=this.guideData.steps;n--;do{var o=i[++n],r=i[n],a=r.target,s=r.type,c=!1;"async"in o&&(c=o.async);var d=I({target:a,type:s});(t=c&&"hotspot"===s)&&T(n,!0),d&&!this.isStepActive(n)&&this.activeSteps.push({index:n,instance:wt(i[n],this.guideData.id,(function(){e.activeSteps=e.activeSteps.filter((function(t){return t.index!==n}))})),target:a,type:s,async:c})}while(t);var u=this.getTrackingState();u.currentStepIndex=n,this.setTrackingState(u)},t.prototype.isStepActive=function(t){return this.activeSteps.some((function(e){return e.index===t}))},t.prototype.getProgress=function(){var t=this.guideData.steps.filter((function(t){return!("hotspot"===t.type&&t.async)})),e=this.guideData.steps[this.getTrackingState().currentStepIndex];return(t.findIndex((function(t){return t.index===e.index}))+1)/(t.length+1)*100},t.prototype.attemptToStartAsyncSteps=function(){var t=this,e=this.guideData.steps;e.forEach((function(n){var i=n.type,o=n.index,r=n.target,a=!1;if("async"in n&&(a=n.async),a&&"hotspot"===i&&I({target:r,type:i})&&t.getTrackingState().asyncSteps[o].toOpen){if(l("Step "+o+": target path and element matched. toOpen is true"),t.isStepActive(o))return p("Step "+o+" is already active");t.activeSteps.push({index:o,instance:wt(e[o],t.guideData.id,(function(){t.activeSteps=t.activeSteps.filter((function(t){return t.index!==o}))})),target:r,type:i,async:a})}}))},t.prototype.removeIllegalSteps=function(){this.activeSteps=this.activeSteps.filter((function(t){var e=t.type,n=t.target,i=t.instance,o=t.async;return!!I({target:n,type:e})||(o&&"hotspot"===e&&i.removeResizeObservers(),i.remove(),!1)}))},t.prototype.setTrackingState=function(t){var n,i=v();g(e.__assign(e.__assign({},i),((n={})[this.guideData.id]=e.__assign(e.__assign({},i[this.guideData.id]),{trackingState:t}),n)))},t.prototype.getTrackingState=function(){return v()[this.guideData.id].trackingState},t.prototype.resetTrackingState=function(){var t=this.generateNewTrackingState();this.setTrackingState(t)},t.prototype.setStep=function(t){var e=this.getTrackingState();if(t<0)return f("Step index can't be less than 0");t+1>this.guideData.steps.length?(e.finished||(this.closeCurrentStep(),e.finished=!0,this.setTrackingState(e)),l("Guide finished")):(this.closeCurrentStep(),e.currentStepIndex=t,this.setTrackingState(e),this.start())},t.prototype.remove=function(){var t=this.getTrackingState();t.currentStepIndex+1===this.guideData.steps.length?t.finished=!0:t.prematurelyClosed=!0,this.setTrackingState(t),this.removeAllActiveSteps(),l("guide closed")},t.prototype.closeCurrentStep=function(){var t=this.getTrackingState().currentStepIndex,e=this.activeSteps.find((function(e){return e.index===t}));e?(e.instance.remove(),this.activeSteps=this.activeSteps.filter((function(e){return e.index!==t}))):p("There's no active step to close")},t.prototype.nextStep=function(){var t=this.getTrackingState().currentStepIndex+1;if(t+1>this.guideData.steps.length)return f("No new steps");this.closeCurrentStep(),this.setStep(t),"function"==typeof u.window.Lusift.onNext&&u.window.Lusift.onNext()},t.prototype.prevStep=function(){for(var t=this.getTrackingState().currentStepIndex;t>-2;){t--;var e=this.guideData.steps[t];if(!e)break;var n=!1;if("async"in e&&(n=e.async),!("hotspot"===e.type&&n))break}if(t<0)return f("No previous steps");this.closeCurrentStep(),this.setStep(t);var i=u.window.Lusift;"function"==typeof i.onPrev&&i.onPrev()},t}(),St={name:"",description:"",steps:[],onNext:function(){},onPrev:function(){},onClose:function(){}};function kt(t){for(var e in t)void 0!==t[e]?t[e]&&"object"==typeof t[e]&&kt(t[e]):delete t[e];return t}var Et={tooltip:{target:{path:{comparator:"is"}},data:{placement:"bottom",arrow:!0,backdrop:{disabled:!1,color:"#444",opacity:"0.5",stageGap:5,nextOnOverlayClick:!1}},actions:{styleProps:{},closeButton:{styleProps:{},disabled:!1},navSection:{styleProps:{},nextButton:{text:"next",styleProps:{},disabled:!1},prevButton:{text:"prev",styleProps:{},disabled:!1},dismissLink:{text:"skip this",styleProps:{},disabled:!1}}},styleProps:{}},hotspot:{target:{path:{comparator:"is"}},beacon:{placement:{top:90,left:90},size:1,color:"",type:"pulsing"},tip:{data:{placement:"bottom",arrow:!0},styleProps:{}},async:!0},modal:{target:{path:{comparator:"is"}},closeButton:{styleProps:{},disabled:!0},data:{}}};function Ot(t,e){var n,i,o;return t=kt(t),e&&(n=Et,i=e,o=Object.assign({},n),b(n)&&b(i)&&Object.keys(i).forEach((function(t){var e;b(i[t])?t in n&&(o[t]=S(n[t],i[t])):Object.assign(o,((e={})[t]=i[t],e))})),Et=o),Object.keys(t).forEach((function(e){var n=t[e].data,i=S(St,n),o=i.steps;o=o.map((function(t,e){var n=t;return"tooltip"===t.type?n=S(Et.tooltip,t):"hotspot"===t.type?n=S(Et.hotspot,t):"modal"===t.type&&(n=S(Et.modal,t)),n})),i.steps=o,t[e].data=i})),t}var Tt=function(){},Ct=function(){f("Can't run this method in dev mode")},_t=function(){function t(){this.content={},this.render=Tt,this.activeGuide=null,this.isDevMode=!1,this.navigationMethods={next:Tt,prev:Tt,close:Tt,goto:function(t){}},l("%c Lusift constructor! ","background: #222; color: #bada55"),b(v())||g({}),function(){if(void 0!==u.document){var t=u.document.createElement("style");t.type="text/css",t.setAttribute("lusift-default",""),t.textContent=".lusift{--primary-color:#17a3a8;--modal-border-radius:4px;--tooltip-border-radius:4px;--progress-bar-height:3px}.lusift-no-scroll{overflow:hidden}.lusift button{background-color:var(--primary-color);border-radius:6px;color:#fff;font-weight:700;padding:.3rem .45rem}.lusift button:focus{outline:1px solid #333}.lusift .tooltip button{border-radius:8px;color:#fff;font-size:.75rem;font-weight:700;padding:.2rem .35rem}.lusift .modal button{font-size:1.1rem;padding:.45rem .75rem}.lusift h1,.lusift h2,.lusift h3{text-align:center}.lusift .closeX{background-color:transparent;border:none;font-weight:400}.lusift .modal h1,.lusift .modal h2,.lusift .modal h3,.lusift .modal p{margin:0 0 .85rem}.lusift .modal h1,.lusift .modal h2,.lusift .modal h3{line-height:1.2}.lusift .tooltip section.close-btn{border-radius:inherit;display:flex;justify-content:flex-end;margin:0}.lusift .tooltip>*{margin:4px 12px}.lusift .tooltip .closeX{background:transparent;border-radius:2px;color:#666;font-size:1rem;font-weight:400;margin:0;padding:0 2px}.lusift .tooltip section.nav-buttons{display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:8px}.lusift .tooltip .nav-buttons .dismiss-link{background:transparent;border:none;color:#777;font-size:.8rem;font-style:italic;margin-right:.4rem;padding:2px}.lusift .tooltip .nav-buttons .dismiss-link:active,.lusift .tooltip .nav-buttons .dismiss-link:focus,.lusift .tooltip .nav-buttons .dismiss-link:hover{border:none;color:#444;text-decoration:underline}.lusift .tooltip .nav-buttons .dismiss-link:active,.lusift .tooltip .nav-buttons .dismiss-link:focus{color:#444;text-decoration:none}.lusift .tooltip .nav-buttons .next,.nav-buttons .prev{border-radius:8px;color:#fff;font-size:.75rem;font-weight:700;padding:.2rem .35rem}.lusift .tooltip .nav-buttons .prev{margin-right:.3rem}.lusift .tooltip{display:block;font-size:1rem;font-weight:700;z-index:99999}.lusift .tooltip .body-content{margin-top:0!important;min-width:80px;white-space:nowrap}.lusift .modal section.close-btn{display:flex;justify-content:flex-end}.lusift .modal .closeX{background:transparent;border-radius:2px;color:#666;font-size:1.45rem;font-weight:400;margin-right:0;padding:0 2px}.lusift .modal .body-content{color:#111;margin-top:5px;padding:3px 15px 8px}.lusift-progress{-webkit-appearance:none;display:block;height:var(--progress-bar-height);margin:0;padding:0;position:absolute;top:0;width:100%}.lusift-progress::-webkit-progress-bar{initial:none;background-color:transparent;border-radius:var(--tooltip-border-radius);position:absolute;top:0}.modal .lusift-progress::-webkit-progress-bar{border-radius:var(--modal-border-radius)}.lusift-progress::-webkit-progress-value{initial:none;background-color:var(--primary-color)}.lusift-beacon{-webkit-animation-delay:1s;animation-delay:1s;border-radius:50%;cursor:pointer;pointer-events:auto;position:absolute}.lusift .hotspot-tooltip{display:block;font-size:1rem;font-weight:700;padding:5px 9px;white-space:nowrap}.lusift .hotspot-tooltip>*{margin:3px 6px}.lusift .hotspot-tooltip .body-content{margin-top:0!important;min-width:80px}";var e=u.document.createElement("style");e.type="text/css",e.setAttribute("lusift-custom","");var n=u.document.createElement("style");n.type="text/css",n.setAttribute("lusift-custom-css","");var i=u.document.createDocumentFragment();i.appendChild(t),i.appendChild(e),i.appendChild(n),u.document.head.appendChild(i)}}()}return t.prototype.next=function(){return this.navigationMethods.next()},t.prototype.prev=function(){return this.navigationMethods.prev()},t.prototype.goto=function(t){return this.navigationMethods.goto(t)},t.prototype.close=function(){this.navigationMethods.close()},t.prototype.showEnabledContent=function(){var t=v(),e=Object.keys(t).find((function(e){var n=t[e].trackingState;return!!n&&n.enabled}));if(!e)return p("No content enabled.");this.showContent(e)},t.prototype.getActiveGuide=function(){if(!this.activeGuide)return null;var t=this.activeGuide,e=t.instance,n=t.id,i=e.guideData,o=e.getTrackingState,r=e.getActiveSteps;return{id:n,instance:{guideData:i,getTrackingState:o,getProgress:e.getProgress,getActiveSteps:r,reRenderStepElements:e.reRenderStepElements}}},t.prototype.doesGuideExist=function(t){return Object.keys(this.getContent()).some((function(e){return e===t}))},t.prototype.enable=function(t){var e=this.getTrackingState();if(!this.doesGuideExist(t))return f("Content of id '"+t+"' doesn't exist");Object.keys(e).forEach((function(n){e[n].trackingState&&(e[n].trackingState.enabled=n===t)})),g(e),this.showContent(t)},t.prototype.disable=function(t){var e=v();if(!this.doesGuideExist(t))return f("Content of id '"+t+"' doesn't exist");e[t].trackingState.enabled=!1,g(e)},t.prototype.setContent=function(t,e){var n=Ot(t,e);if(!x(n))return f("Content data type is invalid");(this.content=n,this.activeGuide)&&(this.doesGuideExist(this.activeGuide.id)||(this.activeGuide.instance.removeAllActiveSteps(),this.activeGuide=null))},t.prototype.getContent=function(){return this.content},t.prototype.refresh=function(){this.activeGuide?(this.activeGuide.instance.start(),l("Lusift refreshed")):(p("No active guide instance to refresh"),this.showEnabledContent())},t.prototype.showContent=function(t){var e,n=this;if(this.isDevMode)return Ct();this.isDevMode=!1;var i=this.getContent();if(0===Object.keys(i).length)return f("Content not set, pass valid content data to setContent()");if(!this.doesGuideExist(t))return f("Content with id of "+t+" doesn't exist");if(this.activeGuide){var o=this.activeGuide;return o.instance,o.id===t?(this.activeGuide.instance.reRenderStepElements(),f(t+" is already active")):this.close()}var r=null===(e=v()[t])||void 0===e?void 0:e.trackingState;if((null==r?void 0:r.finished)||(null==r?void 0:r.prematurelyClosed))return p("Guide '"+t+"' is closed.");var a=new xt(t),s=a.nextStep,c=a.prevStep,d=a.setStep,u=a.remove,h=a.getTrackingState,g=a.reRenderStepElements,b=a.start,m=a.getActiveSteps,y=a.getProgress,w=a.removeAllActiveSteps,x=a.guideData;this.activeGuide={id:t,instance:{guideData:x,getTrackingState:h.bind(a),getProgress:y.bind(a),getActiveSteps:m.bind(a),reRenderStepElements:g.bind(a),removeAllActiveSteps:w.bind(a),start:b.bind(a)}},a.start();var S=this.activeGuide.id;this.navigationMethods={next:s.bind(a),prev:c.bind(a),goto:d.bind(a),close:function(){if(!n.activeGuide)return f("No active guide to close");u.bind(a)(),n.disable(S),"function"==typeof n.onClose&&n.onClose(),n.activeGuide=null,l("Closed "+S)}}},t.prototype.onNext=function(){var t=this.activeGuide.id;if(t)return this.content[t].data.onNext()},t.prototype.onPrev=function(){var t=this.activeGuide.id;if(t)return this.content[t].data.onPrev()},t.prototype.onClose=function(){var t=this.activeGuide.id;if(t)return this.content[t].data.onClose()},t.prototype.setGlobalStyle=function(t){u.document.querySelector("style[lusift-custom-css]").textContent=t},t.prototype.getTrackingState=function(){return v()},t.prototype.devShowStep=function(t,e){if(this.activeGuide)return p("Can't enable dev mode because a guide is active using showContent()");if(!this.content)return p("Content not set, pass valid content object to setContent() before running devShowStep()");if(this.navigationMethods={next:Ct,prev:Ct,goto:Ct,close:Ct},this.isDevMode=!0,this.content[t]){var n=this.content[t].data.steps,i=n[e],o=i.target,r=i.type;if(!I({target:o,type:r}))return p("Display criteria for step do not match. Navigate to the right target page and make sure that the target element is in the visible screen, then reload page.");n[e]?(wt(n[e],t,(function(){})),l("%c Showing step "+e+" of "+t+" in dev mode","background: #222; color: #bada55")):f("Guide '"+t+"' doesn't have a step "+e)}else f("Guide with id '"+t+"' doesn't exist")},t}(),It=new _t,Dt=It.setContent,Lt=It.showContent,At=It.getContent,Gt=It.refresh,Pt=It.getActiveGuide,jt=It.enable,Nt=It.disable,Rt=It.setGlobalStyle,Ht=It.getTrackingState,Bt=It.devShowStep,zt=It.close,Mt=It.next,Ft=It.prev,qt=It.goto,Wt=It.onClose,Ut=It.onNext,Vt=It.onPrev,Xt=It.render,Yt={setContent:Dt.bind(It),showContent:Lt.bind(It),getContent:At.bind(It),refresh:Gt.bind(It),getActiveGuide:Pt.bind(It),enable:jt.bind(It),disable:Nt.bind(It),setGlobalStyle:Rt.bind(It),getTrackingState:Ht.bind(It),devShowStep:Bt.bind(It),close:zt.bind(It),next:Mt.bind(It),prev:Ft.bind(It),goto:qt.bind(It),onClose:Wt.bind(It),onNext:Ut.bind(It),onPrev:Vt.bind(It),render:Xt};return void 0!==u.window&&(u.window.addEventListener("error",(function(t){}),!0),Yt.render=function(t,e,n){"function"==typeof t?function(t,e,n){var i=u.document.querySelector(e);c.default.render(r.default.createElement(t,null),i),n&&n()}(t,e,n):function(t,e,n){document.querySelector(e).innerHTML=t,n&&n()}(t,e,n)},u.window.Lusift=Yt),Yt}));
//# sourceMappingURL=index.js.map
